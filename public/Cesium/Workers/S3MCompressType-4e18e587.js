define(["exports","./S3MPixelFormat-7c66b6aa","./when-207a1520","./Cartographic-dafe811b","./Buffer-bf3c9fbe","./PrimitiveType-44685a19","./IndexDatatype-447558fc","./ComponentDatatype-662c7548"],(function(e,t,r,n,a,o,i,s){"use strict";function u(e,t,r,n){var a=e|t<<8,o=a>>11&31,i=a>>5&63,s=31&a;return r[n+0]=o<<3|o>>2,r[n+1]=i<<2|i>>4,r[n+2]=s<<3|s>>2,r[n+3]=255,a}function f(e,t,r,n){var a=0;0!=(6&n)&&(a=8),function(e,t,r,n){for(var a=new Uint8Array(16),o=u(t[r+0],t[r+1],a,0),i=u(t[r+2],t[r+3],a,4),s=0;s<3;s++){var f=a[s],c=a[4+s];n&&o<=i?(a[8+s]=(f+c)/2,a[12+s]=0):(a[8+s]=(2*f+c)/3,a[12+s]=(f+2*c)/3)}a[11]=255,a[15]=n&&o<=i?0:255;var y=new Uint8Array(16);for(s=0;s<4;++s){var p=t[r+4+s];y[4*s+0]=3&p,y[4*s+1]=p>>2&3,y[4*s+2]=p>>4&3,y[4*s+3]=p>>6&3}for(s=0;s<16;++s)for(var d=4*y[s],l=0;l<4;++l)e[4*s+l]=a[d+l]}(e,t,r+a,0!=(1&n)),0!=(2&n)?function(e,t,r){for(var n=0;n<8;++n){var a=bytes[r+n],o=15&a,i=240&a;e[8*n+3]=o|o<<4,e[8*n+7]=i|i>>4}}(e,0,r):0!=(4&n)&&function(e,t,r){var n=t[r+0],a=t[r+1],o=new Uint8Array(8);if(o[0]=n,o[1]=a,n<=a){for(var i=1;i<5;++i)o[1+i]=((5-i)*n+i*a)/5;o[6]=0,o[7]=255}else for(i=1;i<7;++i)o[1+i]=((7-i)*n+i*a)/7;var s=new Uint8Array(16),u=(r+=2,0);for(i=0;i<2;++i){for(var f=0,c=0;c<3;++c)f|=t[r++]<<8*c;for(c=0;c<8;++c){var y=f>>3*c&7;s[u++]=y}}for(i=0;i<16;++i)e[4*i+3]=o[s[i]]}(e,t,r)}function c(e){}c.decode=function(e,r,n,a,o){if(null!=e&&null!=a&&0!=n&&0!=r){var i=0;1&(i=o>t.S3MPixelFormat.BGR||o===t.S3MPixelFormat.LUMINANCE_ALPHA?4:33)&&32&i?function(e,t,r,n){for(var a=new Uint16Array(4),o=e,i=0,s=0,u=0,f=0,c=0,y=0,p=0,d=0,l=0,v=t/4,h=r/4,A=0;A<h;A++)for(var x=0;x<v;x++)u=4*((h-A)*v+x),a[0]=n[u],a[1]=n[u+1],f=31&a[0],c=2016&a[0],y=63488&a[0],p=31&a[1],d=2016&a[1],l=63488&a[1],a[2]=5*f+3*p>>3|5*c+3*d>>3&2016|5*y+3*l>>3&63488,a[3]=5*p+3*f>>3|5*d+3*c>>3&2016|5*l+3*y>>3&63488,i=n[u+2],o[s=4*A*t+4*x]=a[3&i],o[s+1]=a[i>>2&3],o[s+2]=a[i>>4&3],o[s+3]=a[i>>6&3],o[s+=t]=a[i>>8&3],o[s+1]=a[i>>10&3],o[s+2]=a[i>>12&3],o[s+3]=a[i>>14],i=n[u+3],o[s+=t]=a[3&i],o[s+1]=a[i>>2&3],o[s+2]=a[i>>4&3],o[s+3]=a[i>>6&3],o[s+=t]=a[i>>8&3],o[s+1]=a[i>>10&3],o[s+2]=a[i>>12&3],o[s+3]=a[i>>14]}(e,r,n,a):function(e,t,r,n,a){for(var o=0!=(1&a)?8:16,i=0,s=0;s<r;s+=4)for(var u=0;u<t;u+=4){var c=new Uint8Array(64);f(c,n,i,a);for(var y=0,p=0;p<4;++p)for(var d=0;d<4;++d){var l=u+d,v=s+p;if(l<t&&v<r)for(var h=4*(t*(r-v)+l),A=0;A<4;++A)e[h++]=c[y++];else y+=4}i+=o}}(e,r,n,a,i)}};var y,p=(y=!0,function(e,t){var r=y?function(){if(t){var r=t.apply(e,arguments);return t=null,r}}:function(){};return y=!1,r}),d=p(void 0,(function(){return d.toString().search("(((.+)+)+)+$").toString().constructor(d).search("(((.+)+)+)+$")}));d();var l,v=Object.freeze({SVC_Vertex:1,SVC_Normal:2,SVC_VertexColor:4,SVC_SecondColor:8,SVC_TexutreCoord:16,SVC_TexutreCoordIsW:32}),h=(l=!0,function(e,t){var r=l?function(){if(t){var r=t.apply(e,arguments);return t=null,r}}:function(){};return l=!1,r}),A=h(void 0,(function(){return A.toString().search("(((.+)+)+)+$").toString().constructor(A).search("(((.+)+)+)+$")}));function x(){}A(),x.computeNeighbors=function(e,t){for(var r=e.length/3,n=new Uint32Array(t+1),a=new Uint32Array(t+1),o=function(e,t){e<t?n[e+1]++:a[t+1]++},i=0;i<r;i++){var s=e[3*i],u=e[3*i+1],f=e[3*i+2];o(s,u),o(u,f),o(f,s)}for(i=u=s=0;i<t;i++)f=n[i+1],o=a[i+1],n[i+1]=s,a[i+1]=u,s+=f,u+=o;var c=new Uint32Array(6*r),y=n[t];for(o=function(e,t,r){if(e<t){var o=n[e+1]++;c[2*o]=t,c[2*o+1]=r}else o=a[t+1]++,c[2*y+2*o]=e,c[2*y+2*o+1]=r},i=0;i<r;i++)s=e[3*i],u=e[3*i+1],f=e[3*i+2],o(s,u,i),o(u,f,i),o(f,s,i);for(s=function(e,t){var r=2*e;for(e=t-e,t=1;t<e;t++){for(var n=c[r+2*t],a=c[r+2*t+1],o=t-1;0<=o&&c[r+2*o]>n;o--)c[r+2*o+2]=c[r+2*o],c[r+2*o+3]=c[r+2*o+1];c[r+2*o+2]=n,c[r+2*o+3]=a}},i=0;i<t;i++)s(n[i],n[i+1]),s(y+a[i],y+a[i+1]);var p=new Int32Array(3*r),d=function(t,r){return t===e[3*r]?0:t===e[3*r+1]?1:t===e[3*r+2]?2:-1};for(r=function(e,t){e=d(e,t),p[3*t+e]=-1},s=function(e,t,r,n){e=d(e,t),p[3*t+e]=n,r=d(r,n),p[3*n+r]=t},i=0;i<t;i++){u=n[i],f=n[i+1],o=a[i];for(var l=a[i+1];u<f&&o<l;){var v=c[2*u],h=c[2*y+2*o];v===h?(s(i,c[2*u+1],h,c[2*y+2*o+1]),u++,o++):v<h?(r(i,c[2*u+1]),u++):(r(h,c[2*y+2*o+1]),o++)}for(;u<f;)r(i,c[2*u+1]),u++;for(;o<l;)r(h=c[2*y+2*o],c[2*y+2*o+1]),o++}return p};var m=null;function b(){}function g(e){var t,r=(t=!0,function(e,r){var n=t?function(){if(r){var t=r.apply(e,arguments);return r=null,t}}:function(){};return t=!1,n}),n=r(this,(function(){return n.toString().search("(((.+)+)+)+$").toString().constructor(n).search("(((.+)+)+)+$")}));return n(),e*Math.PI/180}x.deduplicate=function(e,t,r,n,a){void 0===r&&(r=0),void 0===n&&(n=0),void 0===a&&(a=e.byteLength/(4*t)),e=new Uint32Array(e,n,a*t),n=new Uint32Array(a);var o=Math.floor(1.1*a)+1;(null==m||m.length<2*o)&&(m=new Uint32Array(function(e){--e;for(var t=1;32>t;t<<=1)e|=e>>t;return e+1}(2*o)));for(var i=0;i<2*o;i++)m[i]=0;var s=0,u=0!==r?Math.ceil(7.84*1.96/(r*r)*r*(1-r)):a;for(i=0;i<a;i++){if(i===u){if((c=1-s/i)+1.96*Math.sqrt(c*(1-c)/i)<r)return null;u*=2}for(var f,c=i*t,y=f=0;y<t;y++)f=(f=e[c+y]+f|0)+(f<<11)+(f>>>2)|0;y=(f>>>=0)%o;for(var p=s;0!==m[2*y+1];){if(m[2*y]===f){var d=m[2*y+1]-1,l=d*t;e:{for(var v=0;v<t;v++)if(e[c+v]!==e[l+v]){l=!1;break e}l=!0}if(l){p=n[d];break}}++y>=o&&(y-=o)}p===s&&(m[2*y]=f,m[2*y+1]=i+1,s++),n[i]=p}if(0!==r&&1-s/a<r)return null;for(r=new Uint32Array(t*s),i=s=0;i<a;i++)if(n[i]===s){for(o=e,u=i*t,c=r,f=s*t,y=t,p=0;p<y;p++)c[f+p]=o[u+p];s++}return{buffer:r.buffer,indices:n,uniqueCount:s}};var D=g(4),B=g(35),I=Math.cos(B),z=Math.cos(D);var S={position0:new n.t,position1:new n.t,faceNormal0:new n.t,faceNormal1:new n.t,cosAngle:0},C=new n.t,T=new n.t;function w(e,t){var r,a,o,i,s,u,f=(r=e.cosAngle,Math.acos(1<r?1:-1>r?-1:r));return a=T,o=e.position1,i=e.position0,s=i.x-o.x,u=i.y-o.y,(i=s*s+u*u+(o=i.z-o.z)*o)?(i=1/Math.sqrt(i),a.x=s*i,a.y=u*i,a.z=o*i):(a.x=0,a.y=0,a.z=0),n.t.cross(e.faceNormal0,e.faceNormal1,C),f*(0<n.t.dot(C,T)?-1:1)>t}var V=new n.t,P=new n.t,L=new n.t;b.extractEdges=function(e){var t=e.vertices,r=e.dim,a=S,o=a.position0,i=a.position1,s=a.faceNormal0,u=a.faceNormal1,f=function(e){for(var t=e.faces.length/3,r=e.vertices,a=e.dim,o=e.faces,i=new Float32Array(3*t),s=0;s<t;s++){var u=o[3*s+0],f=o[3*s+1],c=o[3*s+2];V.x=r[a*u],V.y=r[a*u+1],V.z=r[a*u+2],P.x=r[a*f],P.y=r[a*f+1],P.z=r[a*f+2],L.x=r[a*c],L.y=r[a*c+1],L.z=r[a*c+2],n.t.subtract(P,V,P),n.t.subtract(L,V,L),n.t.cross(P,L,V),p=void 0,(p=(y=V).x*y.x+y.y*y.y+y.z*y.z)>0&&(p=1/Math.sqrt(p),y.x*=p,y.y*=p,y.z*=p),i[3*s+0]=V.x,i[3*s+1]=V.y,i[3*s+2]=V.z}var y,p;return i}(e),c=function(e){var t=e.faces.length/3,r=e.faces,n=e.neighbors,a=0,o=0;for(o=0;o<t;o++){var i=n[3*o+0],s=n[3*o+1],u=n[3*o+2],f=r[3*o+0],c=r[3*o+1],y=r[3*o+2];a+=-1===i||f<c?1:0,a+=-1===s||c<y?1:0,a+=-1===u||y<f?1:0}var p=new Int32Array(4*a),d=0;for(o=0;o<t;o++)i=n[3*o+0],s=n[3*o+1],u=n[3*o+2],f=r[3*o+0],c=r[3*o+1],y=r[3*o+2],(-1===i||f<c)&&(p[d++]=f,p[d++]=c,p[d++]=o,p[d++]=i),(-1===s||c<y)&&(p[d++]=c,p[d++]=y,p[d++]=o,p[d++]=s),(-1===u||y<f)&&(p[d++]=y,p[d++]=f,p[d++]=o,p[d++]=u);return p}(e),y=c.length/4,p=new Float32Array(9*y),d=0,l=new Float32Array(12*y),v=0,h=0,A=0,x=function(e,t){0===t&&(t=e,e=0);for(var r=Array(t-e),n=e;n<t;n++)r[n-e]=n;return r}(0,y),m=new Float32Array(y);m.forEach((function(e,a,s){var u=c[4*a+0],f=c[4*a+1];o.x=t[u*r],o.y=t[u*r+1],o.z=t[u*r+2],i.x=t[f*r],i.y=t[f*r+1],i.z=t[f*r+2],s[a]=n.t.distance(o,i)})),x.sort((function(e,t){return m[t]-m[e]}));for(var b=[],g=[],B=0;B<y;B++){var C=x[B],T=m[C],O=c[4*C+0],F=c[4*C+1],N=c[4*C+2],E=c[4*C+3],U=-1===E;if(o.x=t[O*r],o.y=t[O*r+1],o.z=t[O*r+2],i.x=t[F*r],i.y=t[F*r+1],i.z=t[F*r+2],U)s.x=f[3*N],s.y=f[3*N+1],s.z=f[3*N+2],u.x=s.x,u.y=s.y,u.z=s.z,a.cosAngle=n.t.dot(s,u);else if(s.x=f[3*N],s.y=f[3*N+1],s.z=f[3*N+2],u.x=f[3*E],u.y=f[3*E+1],u.z=f[3*E+2],a.cosAngle=n.t.dot(s,u),a.cosAngle>z)continue;h+=T,A++,U||a.cosAngle<I?(p[d++]=a.position0.x,p[d++]=a.position0.y,p[d++]=a.position0.z,p[d++]=a.position1.x,p[d++]=a.position1.y,p[d++]=a.position1.z,p[d++]=a.faceNormal0.x,p[d++]=a.faceNormal0.y,p[d++]=a.faceNormal0.z,b.push(T)):w(a,D)&&(l[v++]=a.position0.x,l[v++]=a.position0.y,l[v++]=a.position0.z,l[v++]=a.position1.x,l[v++]=a.position1.y,l[v++]=a.position1.z,l[v++]=a.faceNormal0.x,l[v++]=a.faceNormal0.y,l[v++]=a.faceNormal0.z,l[v++]=a.faceNormal1.x,l[v++]=a.faceNormal1.y,l[v++]=a.faceNormal1.z,g.push(T))}p=p.slice(0,d),l=l.slice(0,v);var _=h/A,M=b.length,R=g.length;return{regular:{instancesData:p,instanceCount:M,edgeLength:M*_},silhouette:{instancesData:l,instanceCount:R,edgeLength:R*_},averageEdgeLength:_}};var O,F=(O=!0,function(e,t){var r=O?function(){if(t){var r=t.apply(e,arguments);return t=null,r}}:function(){};return O=!1,r}),N=F(void 0,(function(){return N.toString().search("(((.+)+)+)+$").toString().constructor(N).search("(((.+)+)+)+$")}));function E(e){}function U(e){if(r.e(e.cachedSidenessVertexBuffer))return e.cachedSidenessVertexBuffer;var t=new Float32Array(8),n=0;return t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=1,t[n++]=1,t[n++]=1,t[n++]=1,t[n++]=0,e.cachedSidenessVertexBuffer=a.h.createVertexBuffer({context:e,typedArray:t,usage:a.A.STATIC_DRAW}),e.cachedSidenessVertexBuffer.vertexArrayDestroyable=!1,e.cachedSidenessVertexBuffer}function _(e,t){for(var r,a,o,i=t.componentsPerAttribute,s=e.vertCompressConstant,u=new n.t(e.minVerticesValue.x,e.minVerticesValue.y,e.minVerticesValue.z),f=new Uint16Array(t.typedArray.buffer,t.typedArray.byteOffset,t.typedArray.byteLength/2),c=new Float32Array(3*e.verticesCount),y=0;y<e.verticesCount;y++)r=f[i*y]*s+u.x,a=f[i*y+1]*s+u.y,o=f[i*y+2]*s+u.z,c[3*y]=r,c[3*y+1]=a,c[3*y+2]=o;return c}N(),E.RegularInstanceStride=12,E.SilhouetteInstanceStride=15,E.createEdgeData=function(e,t,n){if(0==t.length)return null;var a,o=t[0];a=0===o.indexType?new Uint16Array(o.indicesTypedArray.buffer,o.indicesTypedArray.byteOffset,o.indicesTypedArray.byteLength/2):new Uint32Array(o.indicesTypedArray.buffer,o.indicesTypedArray.byteOffset,o.indicesTypedArray.byteLength/4);var i=E.extractEdgeInformation(e,!1,a),s=b.extractEdges(i);return r.e(n)&&(r.e(s.regular.instancesData)&&n.push(s.regular.instancesData.buffer),r.e(s.silhouette.instancesData)&&n.push(s.silhouette.instancesData.buffer)),s},E.createIndexBuffer=function(e){return r.e(e.cachedSidenessIndexBuffer)||(e.cachedSidenessIndexBuffer=a.h.createIndexBuffer({context:e,typedArray:(t=new Uint16Array(6),n=0,t[n++]=2,t[n++]=1,t[n++]=0,t[n++]=3,t[n++]=2,t[n++]=0,t),usage:a.A.STATIC_DRAW,indexDatatype:i.IndexDatatype.UNSIGNED_SHORT}),e.cachedSidenessIndexBuffer.vertexArrayDestroyable=!1),e.cachedSidenessIndexBuffer;var t,n},E.createRegularEdgeAttributes=function(e,t){if(r.e(t.instancesData)&&0!=t.instancesData.length){var n={},o=[];t.attributeLocations=n,t.attributes=o;var i=a.h.createVertexBuffer({context:e,typedArray:t.instancesData,usage:a.A.STATIC_DRAW});t.instancesData=null;var u=s.ComponentDatatype.getSizeInBytes(s.ComponentDatatype.FLOAT),f=U(e),c=0;n.aSideness=c++,o.push({index:n.aSideness,vertexBuffer:f,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*s.ComponentDatatype.getSizeInBytes(s.ComponentDatatype.FLOAT),normalize:!1});var y=E.RegularInstanceStride,p=0;n.aPosition0=c++,o.push({index:n.aPosition0,vertexBuffer:i,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:u*p,strideInBytes:u*y,instanceDivisor:1}),p+=3,n.aPosition1=c++,o.push({index:n.aPosition1,vertexBuffer:i,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:u*p,strideInBytes:u*y,instanceDivisor:1}),p+=3,n.aNormal=c++,o.push({index:n.aNormal,vertexBuffer:i,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:u*p,strideInBytes:u*y,instanceDivisor:1}),p+=3,n.batchId=c++,o.push({index:n.batchId,vertexBuffer:i,componentsPerAttribute:1,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:u*p,strideInBytes:u*y,instanceDivisor:1}),p+=1,n.aVariantStroke=c++,o.push({index:n.aVariantStroke,vertexBuffer:i,componentsPerAttribute:1,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:u*p,strideInBytes:u*y,instanceDivisor:1}),p+=1,n.aVariantExtension=c++,o.push({index:n.aVariantExtension,vertexBuffer:i,componentsPerAttribute:1,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:u*p,strideInBytes:u*y,instanceDivisor:1}),p+=1}},E.createSilhouetteEdgeAttributes=function(e,t){if(r.e(t.instancesData)&&0!=t.instancesData.length){var n={},o=[];t.attributeLocations=n,t.attributes=o;var i=a.h.createVertexBuffer({context:e,typedArray:t.instancesData,usage:a.A.STATIC_DRAW});t.instancesData=null;var u=s.ComponentDatatype.getSizeInBytes(s.ComponentDatatype.FLOAT),f=0;n.aSideness=f++,o.push({index:n.aSideness,vertexBuffer:U(e),componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*u,normalize:!1});var c=E.SilhouetteInstanceStride,y=0;n.aPosition0=f++,o.push({index:n.aPosition0,vertexBuffer:i,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:u*y,strideInBytes:u*c,instanceDivisor:1}),y+=3,n.aPosition1=f++,o.push({index:n.aPosition1,vertexBuffer:i,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:u*y,strideInBytes:u*c,instanceDivisor:1}),y+=3,n.aNormalA=f++,o.push({index:n.aNormalA,vertexBuffer:i,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:u*y,strideInBytes:u*c,instanceDivisor:1}),y+=3,n.aNormalB=f++,o.push({index:n.aNormalB,vertexBuffer:i,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:u*y,strideInBytes:u*c,instanceDivisor:1}),y+=3,n.batchId=f++,o.push({index:n.batchId,vertexBuffer:i,componentsPerAttribute:1,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:u*y,strideInBytes:u*c,instanceDivisor:1}),y+=1,n.aVariantStroke=f++,o.push({index:n.aVariantStroke,vertexBuffer:i,componentsPerAttribute:1,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:u*y,strideInBytes:u*c,instanceDivisor:1}),y+=1,n.aVariantExtension=f++,o.push({index:n.aVariantExtension,vertexBuffer:i,componentsPerAttribute:1,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:u*y,strideInBytes:u*c,instanceDivisor:1}),y+=1}},E.extractEdgeInformation=function(e,t,n){var a,o=e.attrLocation.aPosition,i=e.vertexAttributes[o],s=r.e(e.nCompressOptions)&&(e.nCompressOptions&v.SVC_Vertex)===v.SVC_Vertex,u=i.componentsPerAttribute;s?(u=3,a=_(e,i)):a=new Float32Array(i.typedArray.buffer,i.typedArray.byteOffset,i.typedArray.byteLength/4);var f=a.length/u;if(t&&n)return{faces:n,neighbors:x.computeNeighbors(n,f),vertices:a,dim:u};var c,y=i.typedArray.buffer;c=s?a.buffer:y.slice(i.typedArray.byteOffset,i.typedArray.byteOffset+i.typedArray.byteLength);var p=x.deduplicate(c,u),d=E.selectIndexData(p.indices,n);return{faces:d,neighbors:x.computeNeighbors(d,p.uniqueCount),vertices:new Float32Array(p.buffer),dim:u}},E.selectIndexData=function(e,t){if(t){t=t.slice();for(var r=0;r<t.length;r++)t[r]=e[t[r]];return t}return e};var M=new n.t,R=new n.t,q=new n.t,$=new n.t,k=new n.t,W=new n.t,Z=new n.t,j=new n.t;function G(e,t){function n(e,t,r){var n=48217*e%2147483647,a=t+n/2147483647*(r-=t);return{seed:n,result:Math.round(a)}}var a=function(e,t){var r=new Float32Array(6),n=new Uint32Array(r.buffer),a=new Uint32Array(1);r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=t.x,r[4]=t.y,r[5]=t.z,a[0]=5381;for(var o=0;o<n.length;o++)a[0]=31*a[0]+n[o];return a[0]}(e,t);r.e(a)||(a=2147483647*Math.random());var o=n(a,0,255);a=o.seed,o.result,a=(o=n(a,0,5)).seed;var i,s=o.result;a=(o={seed:i=48217*a%2147483647,result:i/2147483646}).seed;var u=o.result;return u=-(1-Math.min(u/.7,1))+Math.max(0,u-.7)/(1-.7),{variantStroke:s,variantExtension:u=255*(Math.abs(u)**1.2*(0>u?-1:1)*.5+.5)}}E.createEdgeDataByIndices=function(e,t){var a,o,i=e.attrLocation.aPosition,s=e.vertexAttributes[i],u=r.e(e.nCompressOptions)&&(e.nCompressOptions&v.SVC_Vertex)===v.SVC_Vertex,f=s.componentsPerAttribute;u?(f=3,a=_(e,s)):a=new Float32Array(s.typedArray.buffer,s.typedArray.byteOffset,s.typedArray.byteLength/4);for(var c=[],y=[],p=(o=0===t.indexType?new Uint16Array(t.indicesTypedArray.buffer,t.indicesTypedArray.byteOffset,t.indicesTypedArray.byteLength/2):new Uint32Array(t.indicesTypedArray.buffer,t.indicesTypedArray.byteOffset,t.indicesTypedArray.byteLength/4)).length,d=0,l=0,h=4*Math.floor(p/4);l<h;l+=4){var A=o[l],x=o[l+1],m=o[l+2],b=o[l+3];if(M.x=a[f*A],M.y=a[f*A+1],M.z=a[f*A+2],R.x=a[f*x],R.y=a[f*x+1],R.z=a[f*x+2],q.x=a[f*m],q.y=a[f*m+1],q.z=a[f*m+2],$.x=a[f*b],$.y=a[f*b+1],$.z=a[f*b+2],!(n.t.equals(R,q)||n.t.equals(R,$)||n.t.equals(R,M)||n.t.equals(q,M)||n.t.equals($,M))){if(m===b){if(n.t.subtract(R,M,k),n.t.subtract(q,M,W),n.t.cross(k,W,k),n.t.equals(k,n.t.ZERO))continue;n.t.normalize(k,k),c.push(M.x),c.push(M.y),c.push(M.z),c.push(R.x),c.push(R.y),c.push(R.z),c.push(k.x),c.push(k.y),c.push(k.z),c.push(A);var g=(B=G(M,R)).variantStroke,D=B.variantExtension;c.push(g),c.push(D)}else{if(n.t.subtract(R,M,k),n.t.subtract(q,M,W),n.t.cross(k,W,k),n.t.equals(k,n.t.ZERO)||(n.t.normalize(k,k),n.t.subtract(R,M,Z),n.t.subtract($,M,j),n.t.cross(j,Z,Z),n.t.equals(Z,n.t.ZERO)))continue;n.t.normalize(Z,Z),y.push(M.x),y.push(M.y),y.push(M.z),y.push(R.x),y.push(R.y),y.push(R.z),y.push(k.x),y.push(k.y),y.push(k.z),y.push(Z.x),y.push(Z.y),y.push(Z.z),y.push(A);var B;g=(B=G(M,R)).variantStroke,D=B.variantExtension;y.push(g),y.push(D)}d+=n.t.distance(M,R)}}var I=d/(p/4),z=c.length/E.RegularInstanceStride,S=y.length/E.SilhouetteInstanceStride;return{regular:{instancesData:new Float32Array(c),instanceCount:z,edgeLength:z*I},silhouette:{instancesData:new Float32Array(y),instanceCount:S,edgeLength:S},averageEdgeLength:I}};var H,X=(H=!0,function(e,t){var r=H?function(){if(t){var r=t.apply(e,arguments);return t=null,r}}:function(){};return H=!1,r}),J=X(void 0,(function(){return J.toString().search("(((.+)+)+)+$").toString().constructor(J).search("(((.+)+)+)+$")}));J();var K=Object.freeze({encNONE:0,enrS3TCDXTN:14,enrPVRTPF_PVRTC2:19,enrPVRTPF_PVRTC:20,enrPVRTPF_PVRTC_4bpp:21,enrPVRTPF_ETC1:22});e.L=c,e.S3MCompressType=K,e.VertexCompressOption=v,e._0x48a01b=E}));
