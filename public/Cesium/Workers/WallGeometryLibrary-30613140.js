define(["exports","./arrayRemoveDuplicates-053c1528","./Cartographic-dafe811b","./when-207a1520","./Math-bae672f2","./PolylinePipeline-7fefa20c","./GeometryAttribute-9a541822","./PrimitiveType-44685a19"],(function(e,t,r,i,n,o,a,s){"use strict";var h={};function l(e,t){return n.e.equalsEpsilon(e.latitude,t.latitude,n.e.EPSILON10)&&n.e.equalsEpsilon(e.longitude,t.longitude,n.e.EPSILON10)}var g=new r.t$1,u=new r.t$1;var c=new Array(2),m=new Array(2),p={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};function y(e,t){for(var i=new Array(e.length),n=0;n<e.length;n+=3){var o=new r.t(e[n],e[n+1],e[n+2]);s.y.multiplyByPoint(t,o,o),i[n]=o.x,i[n+1]=o.y,i[n+2]=o.z}return i}h.computePositions=function(e,h,v,A,w,f,d){var P=function(e,n,o,a){var s=(n=t.D(n,r.t.equalsEpsilon)).length;if(!(s<2)){var h=i.e(a),c=i.e(o),m=!0,p=new Array(s),y=new Array(s),v=new Array(s),A=n[0];p[0]=A;var w=e.cartesianToCartographic(A,g);c&&(w.height=o[0]),m=m&&0==w.height,y[0]=w.height,v[0]=h?a[0]:0;for(var f=1,d=1;d<s;++d){var P=n[d],F=e.cartesianToCartographic(P,u);c&&(F.height=o[d]),m=m&&0==F.height,l(w,F)?w.height<F.height&&(y[f-1]=F.height):(p[f]=P,y[f]=F.height,v[f]=h?a[d]:0,r.t$1.clone(F,w),++f)}if(!(m||f<2))return p.length=f,y.length=f,v.length=f,{positions:p,topHeights:y,bottomHeights:v}}}(e,h,v,A);if(i.e(P)){var F=a.m.eastNorthUpToFixedFrame(P.positions[0],e,new s.y),b=s.y.inverse(F,new s.y);h=P.positions,v=P.topHeights,A=P.bottomHeights;var C,E,x,D,H=h.length,T=H-2,q=n.e.chordLength(w,e.maximumRadius),L=p;if(L.minDistance=q,L.ellipsoid=e,f){var N,O=0;for(N=0;N<H-1;N++)O+=o.m.numberOfPoints(h[N],h[N+1],q)+1;C=new Float64Array(3*O),E=new Float64Array(3*O),i.e(d)&&(x=new Float64Array(3*O),D=new Float64Array(3*O));var $=c,I=m;L.positions=$,L.height=I;var R=0;for(N=0;N<H-1;N++){$[0]=h[N],$[1]=h[N+1],I[0]=v[N],I[1]=v[N+1];var S=o.m.generateArc(L);C.set(S,R),i.e(d)&&x.set(y(S,b),R),I[0]=A[N],I[1]=A[N+1],E.set(o.m.generateArc(L),R),i.e(d)&&D.set(y(o.m.generateArc(L),b),R),R+=S.length}}else L.positions=h,L.height=v,C=new Float64Array(o.m.generateArc(L)),i.e(d)&&(x=new Float64Array(y(o.m.generateArc(L)))),L.height=A,E=new Float64Array(o.m.generateArc(L)),i.e(d)&&(D=new Float64Array(y(o.m.generateArc(L))));var z={pos:{bottomPositions:E,topPositions:C,numCorners:T}};return i.e(d)&&(z.localPos={bottomPositions:D,topPositions:x,numCorners:T}),z}},e.D=h}));
