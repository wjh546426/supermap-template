define(["require","./createTaskProcessorWorker","./Check-07c613bc","./when-207a1520","./FeatureDetection-fc084259","./PrimitiveType-44685a19","./Cartesian2-4a5e3b0e","./Cartographic-dafe811b","./Cartesian4-58d59766","./Color-03dac52c","./ComponentDatatype-662c7548","./getStringFromTypedArray-8f79e1b1","./buildModuleUrl-c881a5f0","./S3MCompressType-4e18e587","./IndexDatatype-447558fc","./RuntimeError-b98f87df","./Rectangle-49e286b5","./BoundingRectangle-beed7718","./S3MPixelFormat-7c66b6aa","./pako_inflate-e5e032ee","./arrayFill-84efe123","./CompressedTextureBuffer-2218e2dc","./PixelFormat-4b0141b1","./GeographicTilingScheme-ce5c7d33","./Intersect-4d67bbf5","./Math-bae672f2","./WebGLConstants-8d1e45f7","./Event-2ef149d9","./Buffer-bf3c9fbe"],(function(t,e,r,a,n,A,B,E,o,i,C,s,y,l,u,P,f,c,d,T,p,D,L,g,F,I,M,v,m){"use strict";function _(t,e,A){if(r.o.defined("array",t),a.e(e)&&r.o.typeOf.number("begin",e),a.e(A)&&r.o.typeOf.number("end",A),"function"==typeof t.slice)return t.slice(e,A);for(var B=Array.prototype.slice.call(t,e,A),E=n.s.typedArrayTypes,o=E.length,i=0;i<o;++i)if(t instanceof E[i]){B=new E[i](B);break}return B}var S,O,N=(S=!0,function(t,e){var r=S?function(){if(e){var r=e.apply(t,arguments);return e=null,r}}:function(){};return S=!1,r}),R=N(void 0,(function(){return R.toString().search("(((.+)+)+)+$").toString().constructor(R).search("(((.+)+)+)+$")}));function h(){}function b(t,e,r){var n,A=t.num_points(),B=r.num_components(),E=new O.AttributeQuantizationTransform;if(E.InitFromAttribute(r)){for(var o=new Array(B),i=0;i<B;++i)o[i]=E.min_value(i);n={quantizationBits:E.quantization_bits(),minValues:o,range:E.range(),octEncoded:!1}}O.destroy(E),(E=new O.AttributeOctahedronTransform).InitFromAttribute(r)&&(n={quantizationBits:E.quantization_bits(),octEncoded:!0}),O.destroy(E);var s,y=A*B;s=a.e(n)?function(t,e,r,a,n){var A,B;a.quantizationBits<=8?(B=new O.DracoUInt8Array,A=new Uint8Array(n),e.GetAttributeUInt8ForAllPoints(t,r,B)):(B=new O.DracoUInt16Array,A=new Uint16Array(n),e.GetAttributeUInt16ForAllPoints(t,r,B));for(var E=0;E<n;++E)A[E]=B.GetValue(E);return O.destroy(B),A}(t,e,r,n,y):function(t,e,r,a){var n,A;switch(r.data_type()){case 1:case 11:A=new O.DracoInt8Array,n=new Int8Array(a),e.GetAttributeInt8ForAllPoints(t,r,A);break;case 2:A=new O.DracoUInt8Array,n=new Uint8Array(a),e.GetAttributeUInt8ForAllPoints(t,r,A);break;case 3:A=new O.DracoInt16Array,n=new Int16Array(a),e.GetAttributeInt16ForAllPoints(t,r,A);break;case 4:A=new O.DracoUInt16Array,n=new Uint16Array(a),e.GetAttributeUInt16ForAllPoints(t,r,A);break;case 5:case 7:A=new O.DracoInt32Array,n=new Int32Array(a),e.GetAttributeInt32ForAllPoints(t,r,A);break;case 6:case 8:A=new O.DracoUInt32Array,n=new Uint32Array(a),e.GetAttributeUInt32ForAllPoints(t,r,A);break;case 9:case 10:A=new O.DracoFloat32Array,n=new Float32Array(a),e.GetAttributeFloatForAllPoints(t,r,A)}for(var B=0;B<a;++B)n[B]=A.GetValue(B);return O.destroy(A),n}(t,e,r,y);var l=C.ComponentDatatype.fromTypedArray(s);return{array:s,data:{componentsPerAttribute:B,componentDatatype:l,byteOffset:r.byte_offset(),byteStride:C.ComponentDatatype.getSizeInBytes(l)*B,normalized:r.normalized(),quantization:n}}}R();var G=new E.t(40680631590769,40680631590769,40408299984661.445),U=new E.t,x=new E.t;function K(t,e,r,n){var A=Math.cos(e);U.x=A*Math.cos(t),U.y=A*Math.sin(t),U.z=Math.sin(e),U=E.t.normalize(U,U),E.t.multiplyComponents(G,U,x);var B=Math.sqrt(E.t.dot(U,x));return x=E.t.divideByScalar(x,B,x),U=E.t.multiplyByScalar(U,r,U),a.e(n)||(n=new E.t),E.t.add(x,U,n)}var H=new A.y,w=new A.y,V=new E.t,Y=new E.t$1;function J(t,e,r,n,i,s,y,u){var P=void 0,c=void 0,d=void 0,T=void 0,p=r.vertexAttributes,D=r.attrLocation;if(r.nCompressOptions=0,a.e(n.posUniqueID)&&n.posUniqueID>=0){a.e(u)||(r.nCompressOptions|=l.VertexCompressOption.SVC_Vertex);var L=e.GetAttribute(t,n.posUniqueID),g=b(t,e,L),F=g.data.componentsPerAttribute;r.verticesCount=g.array.length/F,r.vertCompressConstant=g.data.quantization.range/(1<<g.data.quantization.quantizationBits);var I=g.data.quantization.minValues;r.minVerticesValue=new o.e(I[0],I[1],I[2],1),F>3&&(r.minVerticesValue.w=I[3]);var M=r.verticesCount;if(s&&(P=new E.t$1,c=new E.t$1,d=new Float32Array(2*M),T=new Float64Array(2*M)),a.e(u)){var v=g.array,m=3===F?E.t.unpackArray(v):o.e.unpackArray(v);for(let t=0,e=m.length;t<e;t++){let e=m[t];E.t.multiplyByScalar(e,r.vertCompressConstant,e),E.t.add(e,r.minVerticesValue,e)}var _=A.y.multiply(u.sphereMatrix,u.geoMatrix,H),S=A.y.multiply(u.ellipsoidMatrix,u.geoMatrix,w);A.y.inverse(S,S);var O=new f.t(6378137,6378137,6378137);for(let t=0,e=m.length;t<e;t++){let e=m[t];A.y.multiplyByPoint(_,e,V);let r=O.cartesianToCartographic(V,Y);s&&(T[2*t]=r.longitude,T[2*t+1]=r.latitude,0===t?(P.longitude=r.longitude,P.latitude=r.latitude,c.longitude=r.longitude,c.latitude=r.latitude):(P.longitude=Math.max(r.longitude,P.longitude),P.latitude=Math.max(r.latitude,P.latitude),c.longitude=Math.min(r.longitude,c.longitude),c.latitude=Math.min(r.latitude,c.latitude)));let a=K(r.longitude,r.latitude,r.height,V);A.y.multiplyByPoint(S,a,e)}var N=new Array(3*m.length);3===F?E.t.packArray(m,N):o.e.packArray(m,N),g.array=new Float32Array(N),g.data.componentDatatype=C.ComponentDatatype.FLOAT,g.data.byteStride=4*F}if(D.aPosition=p.length,p.push({index:D.aPosition,typedArray:g.array,componentsPerAttribute:F,componentDatatype:g.data.componentDatatype,offsetInBytes:g.data.byteOffset,strideInBytes:g.data.byteStride,normalize:g.data.normalized}),!a.e(u)&&s)for(var R=new E.t,h=new E.t,G=new E.t$1,U=0;U<M;U++)A.y.multiplyByPoint(i,E.t.fromElements(g.array[3*U]*r.vertCompressConstant+I[0],g.array[3*U+1]*r.vertCompressConstant+I[1],g.array[3*U+2]*r.vertCompressConstant+I[2],R),h),G=E.t$1.fromCartesian(h),T[2*U]=G.longitude,T[2*U+1]=G.latitude,0===U?(P.longitude=G.longitude,P.latitude=G.latitude,c.longitude=G.longitude,c.latitude=G.latitude):(P.longitude=Math.max(G.longitude,P.longitude),P.latitude=Math.max(G.latitude,P.latitude),c.longitude=Math.min(G.longitude,c.longitude),c.latitude=Math.min(G.latitude,c.latitude));if(s){for(U=0;U<M;U++)d[2*U]=T[2*U]-c.longitude,d[2*U+1]=T[2*U+1]-c.latitude;D.img=p.length,p.push({index:D.img,typedArray:d,componentsPerAttribute:2,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),y.max=P,y.min=c}}if(a.e(n.normalUniqueID)&&n.normalUniqueID>=0){r.nCompressOptions|=l.VertexCompressOption.SVC_Normal;var x=e.GetAttribute(t,n.normalUniqueID),J=b(t,e,x),k=J.data.quantization;r.normalRangeConstant=(1<<k.quantizationBits)-1,D.aNormal=p.length,p.push({index:D.aNormal,typedArray:J.array,componentsPerAttribute:J.data.componentsPerAttribute,componentDatatype:J.data.componentDatatype,offsetInBytes:J.data.byteOffset,strideInBytes:J.data.byteStride,normalize:J.data.normalized})}if(a.e(n.colorUniqueID)&&n.colorUniqueID>=0){r.nCompressOptions|=l.VertexCompressOption.SVC_VertexColor;var W=e.GetAttribute(t,n.colorUniqueID),Z=b(t,e,W),X=Z.array,Q=Z.data.componentDatatype,z=Z.data.byteOffset,j=Z.data.byteStride,q=Z.data.normalized;if(Z.array instanceof Int32Array){X=new Uint8Array(Z.array.length);for(let t=0,e=Z.array.length;t<e;t++)X[t]=Z.array[t];Q=5121,z=0,j=4,q=!0}D.aColor=p.length,p.push({index:D.aColor,typedArray:X,componentsPerAttribute:Z.data.componentsPerAttribute,componentDatatype:Q,offsetInBytes:z,strideInBytes:j,normalize:q})}for(U=0;U<n.texCoordUniqueIDs.length;U++){r.texCoordCompressConstant=[],r.minTexCoordValue=[];var $=n.texCoordUniqueIDs[U];if(!($<0)){var tt=e.GetAttribute(t,$),et=b(t,e,tt);if(a.e(et.data.quantization)){r.nCompressOptions|=l.VertexCompressOption.SVC_TexutreCoord,r.texCoordCompressConstant.push(et.data.quantization.range/(1<<et.data.quantization.quantizationBits));I=et.data.quantization.minValues;r.minTexCoordValue.push(new B.o(I[0],I[1]))}var rt="aTexCoord"+U;D[rt]=p.length,p.push({index:D[rt],typedArray:et.array,componentsPerAttribute:et.data.componentsPerAttribute,componentDatatype:et.data.componentDatatype,offsetInBytes:et.data.byteOffset,strideInBytes:et.data.byteStride,normalize:et.data.normalized}),r.textureCoordIsW=!0}}for(U=0;U<n.vertexAttrUniqueIDs.length;U++){var at=n.vertexAttrUniqueIDs[U];if(!(at<0)){var nt=e.GetAttribute(t,at),At=b(t,e,nt);D.aVertexWeight=p.length,p.push({index:D.aVertexWeight,typedArray:At.array,componentsPerAttribute:At.data.componentsPerAttribute,componentDatatype:At.data.componentDatatype,offsetInBytes:At.data.byteOffset,strideInBytes:At.data.byteStride,normalize:At.data.normalized}),r.customVertexAttribute={VertexWeight:0}}}}h.dracoDecodePointCloud=function(t,e,r,a,n){for(var A=new(O=t).Decoder,B=["POSITION","NORMAL","COLOR"],E=0;E<B.length;++E)A.SkipAttributeTransform(O[B[E]]);var o=new O.DecoderBuffer;if(o.Init(e,r),A.GetEncodedGeometryType(o)!==O.POINT_CLOUD)throw new P.t("Draco geometry type must be POINT_CLOUD.");var i=new O.PointCloud,C=A.DecodeBufferToPointCloud(o,i);if(!C.ok()||0===i.ptr)throw new P.t("Error decoding draco point cloud: "+C.error_msg());O.destroy(o),J(i,A,a,n),O.destroy(i),O.destroy(A)},h.dracoDecodeMesh=function(t,e,r,a,n,B,E,o,i,C){for(var s=new(O=t).Decoder,y=["POSITION","NORMAL","COLOR","TEX_COORD"],l=0;l<y.length;++l)s.SkipAttributeTransform(O[y[l]]);var f=new O.DecoderBuffer;if(f.Init(e,r),s.GetEncodedGeometryType(f)!==O.TRIANGULAR_MESH)throw new P.t("Unsupported draco mesh geometry type.");var c=new O.Mesh;if(!s.DecodeBufferToMesh(f,c).ok()||0===c.ptr)return!1;O.destroy(f),J(c,s,a,B,E,o,i,C);var d=function(t,e){for(var r=t.num_points(),a=t.num_faces(),n=new O.DracoInt32Array,A=3*a,B=u.IndexDatatype.createTypedArray(r,A),E=0,o=0;o<a;++o)e.GetFaceFromMesh(t,o,n),B[E+0]=n.GetValue(0),B[E+1]=n.GetValue(1),B[E+2]=n.GetValue(2),E+=3;var i=u.IndexDatatype.UNSIGNED_SHORT;return B instanceof Uint32Array&&(i=u.IndexDatatype.UNSIGNED_INT),O.destroy(n),{typedArray:B,numberOfIndices:A,indexDataType:i}}(c,s);n.indicesTypedArray=d.typedArray,n.indicesCount=d.numberOfIndices,n.indexType=d.indexDataType,n.primitiveType=A._0x102869.TRIANGLES,O.destroy(c),O.destroy(s)};var k,W=(k=!0,function(t,e){var r=k?function(){if(e){var r=e.apply(t,arguments);return e=null,r}}:function(){};return k=!1,r}),Z=W(void 0,(function(){return Z.toString().search("(((.+)+)+)+$").toString().constructor(Z).search("(((.+)+)+)+$")}));Z();var X,Q=Object.freeze({OSGBFile:0,OSGBCacheFile:1,ClampGroundPolygon:2,ClampObjectPolygon:3,ClampGroundLine:4,ClampObjectLine:5,IconPoint:6,Text:7,PointCloudFile:8,ExtendRegion3D:9,ExtendClampPolygonCache:10,PolylineEffect:11,RegionEffect:12,ClampGroundAndObjectLineCache:13,ClampGroundRealtimeRasterCache:14}),z=(X=!0,function(t,e){var r=X?function(){if(e){var r=e.apply(t,arguments);return e=null,r}}:function(){};return X=!1,r}),j=z(void 0,(function(){return j.toString().search("(((.+)+)+)+$").toString().constructor(j).search("(((.+)+)+)+$")}));function q(){}function $(t){var e=new y.i,r=t.instanceBounds;if(!a.e(r))return e;var n=new E.t(r[0],r[1],r[2]),A=new E.t(r[3],r[4],r[5]),B=E.t.lerp(n,A,.5,new E.t),o=E.t.distance(B,n);return e.center=B,e.radius=o,e}function tt(t){var e,r,n=new y.i,A=new E.t,B=t.vertexAttributes[0],o=B.componentsPerAttribute,i=a.e(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,C=1;i?(C=t.vertCompressConstant,e=new E.t(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),r=new Uint16Array(B.typedArray.buffer,B.typedArray.byteOffset,B.typedArray.byteLength/2)):r=new Float32Array(B.typedArray.buffer,B.typedArray.byteOffset,B.typedArray.byteLength/4);for(var s=[],u=0;u<t.verticesCount;u++)E.t.fromArray(r,o*u,A),i&&(A=E.t.multiplyByScalar(A,C,A),A=E.t.add(A,e,A)),s.push(E.t.clone(A));return y.i.fromPoints(s,n),s.length=0,n}function et(t){var e,r,n=new y.i,A=new E.t,B=a.e(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,o=t.vertexAttributes[0],i=o.componentsPerAttribute,C=1;B?(C=t.vertCompressConstant,r=new E.t(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),e=new Uint16Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/2)):e=new Float32Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/4);for(var s=[],u=0;u<t.verticesCount;u++)E.t.fromArray(e,i*u,A),B&&(A=E.t.multiplyByScalar(A,C,A),A=E.t.add(A,r,A)),s.push(E.t.clone(A));return y.i.fromPoints(s,n),s.length=0,n}function rt(t){var e,r,n=a.e(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,A=new y.i,B=new E.t,i=new E.t,C=t.vertexAttributes[0],s=C.componentsPerAttribute,u=t.attrLocation.aPosition,P=t.vertexAttributes[u],f=t.attrLocation.aTexCoord5,c=t.vertexAttributes[f],d=c.componentsPerAttribute;n?(s=3,d=3,e=nt(t,P),r=function(t,e,r){for(var a,n,A,B=e.componentsPerAttribute,E=t.texCoordCompressConstant[r],i=new o.e(t.minTexCoordValue[r].x,t.minTexCoordValue[r].y,t.minTexCoordValue[r].z,t.minTexCoordValue[r].w),C=new Uint16Array(e.typedArray.buffer,e.typedArray.byteOffset,e.typedArray.byteLength/2),s=new Float32Array(3*t.verticesCount),y=0;y<t.verticesCount;y++)a=C[B*y]*E+i.x,n=C[B*y+1]*E+i.y,A=C[B*y+2]*E+i.z,s[3*y]=a,s[3*y+1]=n,s[3*y+2]=A;return s}(t,c,5)):(e=new Float32Array(C.typedArray.buffer,C.typedArray.byteOffset,C.typedArray.byteLength/4),r=new Float32Array(c.typedArray.buffer,c.typedArray.byteOffset,c.typedArray.byteLength/4));for(var T=[],p=0;p<t.verticesCount;p++)E.t.fromArray(e,s*p,B),E.t.fromArray(r,d*p,i),E.t.add(B,i,B),T.push(E.t.clone(B));return y.i.fromPoints(T,A),T.length=0,A}function at(t){var e=A._0x102869.TRIANGLES;switch(t){case 1:e=A._0x102869.POINTS;break;case 2:e=A._0x102869.LINES;break;case 3:e=A._0x102869.LINE_STRIP;break;case 4:e=A._0x102869.TRIANGLES}return e}function nt(t,e){for(var r,a,n,A=e.componentsPerAttribute,B=t.vertCompressConstant,o=new E.t(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),i=new Uint16Array(e.typedArray.buffer,e.typedArray.byteOffset,e.typedArray.byteLength/2),C=new Float32Array(3*t.verticesCount),s=0;s<t.verticesCount;s++)r=i[A*s]*B+o.x,a=i[A*s+1]*B+o.y,n=i[A*s+2]*B+o.z,C[3*s]=r,C[3*s+1]=a,C[3*s+2]=n;return C}j(),q.calcBoundingSphereInWorker=function(t,e){return e.instanceIndex>-1?$(e):a.e(e.clampRegionEdge)?rt(e):t>=Q.ClampGroundPolygon&&t<=Q.ClampObjectLine?et(e):t==Q.ClampGroundAndObjectLineCache?rt(e):tt(e)},q.calcBoundingSphere=function(t,e,r){var n,A=t._fileType;return n=e.instanceIndex>-1?$(e):a.e(e.clampRegionEdge)?rt(e):A>=Q.ClampGroundPolygon&&A<=Q.ClampObjectLine?et(e):A==Q.ClampGroundAndObjectLineCache?rt(e):tt(e),y.i.transform(n,r,n),n},q.calcBoundingRectangle=function(t,e){var r;return t._fileType===Q.ClampGroundPolygon&&(r=function(t){var e,r,n=a.e(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,A=new c.f,o=t.vertexAttributes[0],i=o.componentsPerAttribute,C=1;n?(C=t.vertCompressConstant,r=new E.t(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),e=new Uint16Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/2)):e=new Float32Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/4);for(var s=[],y=0;y<t.verticesCount;y++){var u=e[i*y],P=e[i*y+1];n&&(u=C*u+r.x,P=C*P+r.y),s.push(new B.o(u,P))}return c.f.fromPoints(s,A),s.length=0,A}(e)),r},q.createEdge=function(t,e){if(!(e.length<1)){var r=function(t){for(var e=[],r=t.length,a=0;a<r;a++){var n=at(t[a].primitiveType);(n===A._0x102869.LINES||n===A._0x102869.LINE_STRIP)&&e.push(t[a])}return e}(e);if(0!=r.length){var n,B=function(t){for(var e=0,r=t.length,a=0;a<r;a++){var n=t[a],B=at(n.primitiveType);B==A._0x102869.LINES?e+=n.indicesCount/2:B==A._0x102869.LINE_STRIP&&e++}return e}(r),o=t.attrLocation.aPosition,i=t.vertexAttributes[o],s=a.e(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,y=i.componentsPerAttribute;s?(y=3,n=nt(t,i)):n=new Float32Array(i.typedArray.buffer,i.typedArray.byteOffset,i.typedArray.byteLength/4);for(var u=function(t){for(var e=0,r=t.length,a=0;a<r;a++)e+=t[a].indicesCount;return e}(r),P=function(t,e,r){for(var a,n=[],B=r.length,o=0;o<B;o++){var i,C=r[o];i=0===C.indexType?new Uint16Array(C.indicesTypedArray.buffer,C.indicesTypedArray.byteOffset,C.indicesTypedArray.byteLength/2):new Uint32Array(C.indicesTypedArray.buffer,C.indicesTypedArray.byteOffset,C.indicesTypedArray.byteLength/4);var s=at(C.primitiveType);if(s==A._0x102869.LINES)for(a=0;a<C.indicesCount;a+=2){var y=[],l=new E.t;l.x=t[i[a]*e],l.y=t[i[a]*e+1],l.z=t[i[a]*e+2],y.push(l);var u=new E.t;u.x=t[i[a+1]*e],u.y=t[i[a+1]*e+1],u.z=t[i[a+1]*e+2],y.push(u),n.push(y)}else if(s==A._0x102869.LINE_STRIP){for(y=[],a=0;a<C.indicesCount;a++){var P=new E.t;P.x=t[i[a]*e],P.y=t[i[a]*e+1],P.z=t[i[a]*e+2],y.push(P)}n.push(y)}}return n}(n,y,r),f=4*u-4*B,c=new Float32Array(3*f),d=new Float32Array(3*f),T=new Float32Array(3*f),p=new Int8Array(2*f),D=0,L=0;L<B;L++){for(var g=P[L].length,F=0;F<g;F++){var I=4*D-4*L,M=3*I+12*F,v=P[L][F];0!=F&&(c[M-6]=v.x,c[M-5]=v.y,c[M-4]=v.z,c[M-3]=v.x,c[M-2]=v.y,c[M-1]=v.z),F!=g-1&&(c[M]=v.x,c[M+1]=v.y,c[M+2]=v.z,c[M+3]=v.x,c[M+4]=v.y,c[M+5]=v.z);var m=v;F+1<g&&(m=P[L][F+1]),0!=F&&(T[M-6]=m.x,T[M-5]=m.y,T[M-4]=m.z,T[M-3]=m.x,T[M-2]=m.y,T[M-1]=m.z),F!=g-1&&(T[M]=m.x,T[M+1]=m.y,T[M+2]=m.z,T[M+3]=m.x,T[M+4]=m.y,T[M+5]=m.z);var _=v;F>=1&&(_=P[L][F-1]),0!=F&&(d[M-6]=_.x,d[M-5]=_.y,d[M-4]=_.z,d[M-3]=_.x,d[M-2]=_.y,d[M-1]=_.z),F!=g-1&&(d[M]=_.x,d[M+1]=_.y,d[M+2]=_.z,d[M+3]=_.x,d[M+4]=_.y,d[M+5]=_.z),M=2*I+8*F,0!=F&&(p[M-4]=-1,p[M-3]=-1,p[M-2]=1,p[M-1]=-1),F!=g-1&&(p[M]=-1,p[M+1]=1,p[M+2]=1,p[M+3]=1)}D+=P[L].length}var S={vertexAttributes:[],attrLocation:{}},O=S.vertexAttributes,N=S.attrLocation;S.instanceCount=0,S.instanceMode=0,N.aPosition=0,O.push({index:N.aPosition,typedArray:c,componentsPerAttribute:3,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aNormal=1,O.push({index:N.aNormal,typedArray:d,componentsPerAttribute:3,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aTexCoord0=2,O.push({index:N.aTexCoord0,typedArray:T,componentsPerAttribute:3,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aTexCoord1=3,O.push({index:N.aTexCoord1,typedArray:p,componentsPerAttribute:2,componentDatatype:C.ComponentDatatype.BYTE,offsetInBytes:0,strideInBytes:2*Int8Array.BYTES_PER_ELEMENT,normalize:!1});for(var R=[],h=0;h<P.length;h++)R.push(P[h].length);return{vertexPackage:S,indexPackage:function(t,e,r,a){var n,B={};B.indicesCount=6*(t-e),B.indexType=a>65535?1:0,B.primitiveType=A._0x102869.TRIANGLES,n=0===B.indexType?new Uint16Array(B.indicesCount):new Uint32Array(B.indicesCount);for(var E=0,o=0;o<e;o++){for(var i=0;i<r[o]-1;i++)n[6*(E-o+i)]=4*(E-o+i),n[6*(E-o+i)+1]=4*(E-o+i)+2,n[6*(E-o+i)+2]=4*(E-o+i)+1,n[6*(E-o+i)+3]=4*(E-o+i)+1,n[6*(E-o+i)+4]=4*(E-o+i)+2,n[6*(E-o+i)+5]=4*(E-o+i)+3;E+=r[o]}return B.indicesTypedArray=n,B}(u,B,R,f)}}}};var At,Bt=(At=!0,function(t,e){var r=At?function(){if(e){var r=e.apply(t,arguments);return e=null,r}}:function(){};return At=!1,r}),Et=Bt(void 0,(function(){return Et.toString().search("(((.+)+)+)+$").toString().constructor(Et).search("(((.+)+)+)+$")}));Et();var ot,it,Ct=Object.freeze({S3M:49,S3M4:1}),st=function(){var t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var r="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";WebAssembly.validate(t)&&(r="B9h79tEBBBE5V9gBB9gVUUUUUEU9gIUUUB9gDUUB9gEUEUIMXBBEBEEDIDIDLLVE9wEEEVIEBEOWEUEC+Q/aEKR/LEdO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9f9kw9j9v9kw9WwvTw949C919m9mwvBDy9tw79o9v9wT9f9kw9j9v9kw69u9kw949C919m9mwvBLe9tw79o9v9wT9f9kw9j9v9kw69u9kw949Twg91w9u9jwBVl9tw79o9v9wT9f9kw9j9v9kws9p2Twv9P9jTBOk9tw79o9v9wT9f9kw9j9v9kws9p2Twv9R919hTBWl9tw79o9v9wT9f9kw9j9v9kws9p2Twvt949wBQL79iv9rBKQ/j6XLBZIK9+EVU8jJJJJBCZ9rHBCBHEINCBHDCBHIINABCWFADFAICJUAEAD4CEgGLe86BBAIALFHIADCEFGDCW9HMBKAEC+Q+YJJBFAI86BBAECITC+Q1JJBFAB8pIW83IBAECEFGECJD9HMBKK1HLSUD97EUO978jJJJJBCJ/KB9rGV8kJJJJBC9+HODNADCEFAL0MBCUHOAIrBBC+gE9HMBAVAIALFGRAD9rAD/8QBBCJ/ABAD9uC/wfBgGOCJDAOCJD6eHWAICEFHOCBHdDNINAdAE9PMEAWAEAd9rAdAWFAE6eHQDNDNADtMBAQCSFGLC9wgGKCI2HXAKCETHMALCL4CIFCD4HpCBHSINAOHZCBHhDNINDNARAZ9rAp9PMBCBHOXVKAVCJ/CBFAhAK2FHoAZApFHOCBHIDNAKC/AB6MBARAO9rC/gB6MBCBHLINAoALFHIDNDNDNDNDNAZALCO4FrBBGaCIgpLBEDIBKAICBPhPKLBXIKAIAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLBAOCLFAlPqBFAqC+Q+YJJBFrBBFHOXDKAIAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLBAOCWFAlPqBFAqC+Q+YJJBFrBBFHOXEKAIAOPBBBPKLBAOCZFHOKDNDNDNDNDNAaCD4CIgpLBEDIBKAICBPhPKLZXIKAIAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLZAOCLFAlPqBFAqC+Q+YJJBFrBBFHOXDKAIAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLZAOCWFAlPqBFAqC+Q+YJJBFrBBFHOXEKAIAOPBBBPKLZAOCZFHOKDNDNDNDNDNAaCL4CIgpLBEDIBKAICBPhPKLAXIKAIAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLAAOCLFAlPqBFAqC+Q+YJJBFrBBFHOXDKAIAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLAAOCWFAlPqBFAqC+Q+YJJBFrBBFHOXEKAIAOPBBBPKLAAOCZFHOKDNDNDNDNDNAaCO4pLBEDIBKAICBPhPKL8wXIKAIAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGaCITC+Q1JJBFPBIBAaC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGaCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKL8wAOCLFAlPqBFAaC+Q+YJJBFrBBFHOXDKAIAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGaCITC+Q1JJBFPBIBAaC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGaCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKL8wAOCWFAlPqBFAaC+Q+YJJBFrBBFHOXEKAIAOPBBBPKL8wAOCZFHOKALC/ABFHIALCJEFAK0MEAIHLARAO9rC/fB0MBKKDNAIAK9PMBAICI4HLINDNARAO9rCk9PMBCBHOXRKAoAIFHaDNDNDNDNDNAZAICO4FrBBALCOg4CIgpLBEDIBKAaCBPhPKLBXIKAaAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLBAOCLFAlPqBFAqC+Q+YJJBFrBBFHOXDKAaAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLBAOCWFAlPqBFAqC+Q+YJJBFrBBFHOXEKAaAOPBBBPKLBAOCZFHOKALCDFHLAICZFGIAK6MBKKDNAOtMBAOHZAhCEFGhCLsMDXEKKCBHOXIKDNAKtMBAVCJDFASFHIAVASFPBDBHlCBHaINAIAVCJ/CBFAaFGLPBLBGxCEP9tAxCEPSGcP9OP9hP9RGxALAKFPBLBGkCEP9tAkAcP9OP9hP9RGkPMBZEhDoIaLcVxOqRlGyALAMFPBLBG8aCEP9tA8aAcP9OP9hP9RG8aALAXFPBLBGeCEP9tAeAcP9OP9hP9RGePMBZEhDoIaLcVxOqRlG3PMBEZhDIoaLVcxORqlGcAcPMBEDIBEDIBEDIBEDIAlP9uGlPeBbDBAIADFGLAlAcAcPMLVORLVORLVORLVORP9uGlPeBbDBALADFGLAlAcAcPMWdQKWdQKWdQKWdQKP9uGlPeBbDBALADFGLAlAcAcPMXMpSXMpSXMpSXMpSP9uGlPeBbDBALADFGLAlAyA3PMWdkyQK8aeXM35pS8e8fGcAcPMBEDIBEDIBEDIBEDIP9uGlPeBbDBALADFGLAlAcAcPMLVORLVORLVORLVORP9uGlPeBbDBALADFGLAlAcAcPMWdQKWdQKWdQKWdQKP9uGlPeBbDBALADFGLAlAcAcPMXMpSXMpSXMpSXMpSP9uGlPeBbDBALADFGLAlAxAkPMWkdyQ8aKeX3M5p8eS8fGxA8aAePMWkdyQ8aKeX3M5p8eS8fGkPMBEZhDIoaLVcxORqlGcAcPMBEDIBEDIBEDIBEDIP9uGlPeBbDBALADFGLAlAcAcPMLVORLVORLVORLVORP9uGlPeBbDBALADFGLAlAcAcPMWdQKWdQKWdQKWdQKP9uGlPeBbDBALADFGLAlAcAcPMXMpSXMpSXMpSXMpSP9uGlPeBbDBALADFGLAlAxAkPMWdkyQK8aeXM35pS8e8fGcAcPMBEDIBEDIBEDIBEDIP9uGlPeBbDBALADFGLAlAcAcPMLVORLVORLVORLVORP9uGlPeBbDBALADFGLAlAcAcPMWdQKWdQKWdQKWdQKP9uGlPeBbDBALADFGLAlAcAcPMXMpSXMpSXMpSXMpSP9uGlPeBbDBALADFHIAaCZFGaAK6MBKKASCLFGSAD6MBKKABAdAD2FAVCJDFAQAD2/8QBBAVAVCJDFAQCUFAD2FAD/8QBBKAQCBAOeAdFHdAOMBKC9+HOXEKCBC99ARAO9rADCAADCA0eseHOKAVCJ/KBF8kJJJJBAOKWBZ+BJJJBK+KoEZU8jJJJJBC/AE9rGV8kJJJJBC9+HODNAECI9uGRChFAL0MBCUHOAIrBBGWC/wEgC/gE9HMBAWCSgGdCE0MBAVC/ABFCfECJE/8KBAVCuF9CU83IBAVC8wF9CU83IBAVCYF9CU83IBAVCAF9CU83IBAVCkF9CU83IBAVCZF9CU83IBAV9CU83IWAV9CU83IBAIALFC9wFHQAICEFGWARFHKDNAEtMBCMCSAdCEseHXABHICBHdCBHMCBHpCBHLCBHOINDNAKAQ9NMBC9+HOXIKDNDNAWrBBGRC/vE0MBAVC/ABFARCL4CU7AOFCSgCITFGSYDLHZASYDBHhDNARCSgGSAX9PMBAVARCU7ALFCSgCDTFYDBAdASeHRAStHSDNDNADCD9HMBABAh87EBABCLFAR87EBABCDFAZ87EBXEKAIAhbDBAICWFARbDBAICLFAZbDBKAdASFHdAVC/ABFAOCITFGoARbDBAoAZbDLAVALCDTFARbDBAVC/ABFAOCEFCSgGOCITFGZAhbDBAZARbDLALASFHLAOCEFHOXDKDNDNASCSsMBAMASFASC987FCEFHMXEKAK8sBBGSCfEgHRDNDNASCU9MMBAKCEFHKXEKAK8sBEGSCfBgCRTARCfBgvHRDNASCU9MMBAKCDFHKXEKAK8sBDGSCfBgCpTARvHRDNASCU9MMBAKCIFHKXEKAK8sBIGSCfBgCxTARvHRDNASCU9MMBAKCLFHKXEKAKrBLC3TARvHRAKCVFHKKARCE4CBARCEg9r7AMFHMKDNDNADCD9HMBABAh87EBABCLFAM87EBABCDFAZ87EBXEKAIAhbDBAICWFAMbDBAICLFAZbDBKAVC/ABFAOCITFGRAMbDBARAZbDLAVALCDTFAMbDBAVC/ABFAOCEFCSgGOCITFGRAhbDBARAMbDLALCEFHLAOCEFHOXEKDNARCPE0MBAVALAQARCSgFrBBGSCL4GZ9rCSgCDTFYDBAdCEFGhAZeHRAVALAS9rCSgCDTFYDBAhAZtGoFGhASCSgGZeHSAZtHZDNDNADCD9HMBABAd87EBABCLFAS87EBABCDFAR87EBXEKAIAdbDBAICWFASbDBAICLFARbDBKAVALCDTFAdbDBAVC/ABFAOCITFGaARbDBAaAdbDLAVALCEFGLCSgCDTFARbDBAVC/ABFAOCEFCSgCITFGaASbDBAaARbDLAVALAoFCSgGLCDTFASbDBAVC/ABFAOCDFCSgGOCITFGRAdbDBARASbDLAOCEFHOALAZFHLAhAZFHdXEKAdCBAKrBBGaeGZARC/+EsGcFHRAaCSgHhDNDNAaCL4GoMBARCEFHSXEKARHSAVALAo9rCSgCDTFYDBHRKDNDNAhMBASCEFHdXEKASHdAVALAa9rCSgCDTFYDBHSKDNDNActMBAKCEFHaXEKAK8sBEGaCfEgHZDNDNAaCU9MMBAKCDFHaXEKAK8sBDGaCfBgCRTAZCfBgvHZDNAaCU9MMBAKCIFHaXEKAK8sBIGaCfBgCpTAZvHZDNAaCU9MMBAKCLFHaXEKAK8sBLGaCfBgCxTAZvHZDNAaCU9MMBAKCVFHaXEKAKCOFHaAKrBVC3TAZvHZKAZCE4CBAZCEg9r7AMFGMHZKDNDNAoCSsMBAaHcXEKAa8sBBGKCfEgHRDNDNAKCU9MMBAaCEFHcXEKAa8sBEGKCfBgCRTARCfBgvHRDNAKCU9MMBAaCDFHcXEKAa8sBDGKCfBgCpTARvHRDNAKCU9MMBAaCIFHcXEKAa8sBIGKCfBgCxTARvHRDNAKCU9MMBAaCLFHcXEKAaCVFHcAarBLC3TARvHRKARCE4CBARCEg9r7AMFGMHRKDNDNAhCSsMBAcHKXEKAc8sBBGKCfEgHSDNDNAKCU9MMBAcCEFHKXEKAc8sBEGKCfBgCRTASCfBgvHSDNAKCU9MMBAcCDFHKXEKAc8sBDGKCfBgCpTASvHSDNAKCU9MMBAcCIFHKXEKAc8sBIGKCfBgCxTASvHSDNAKCU9MMBAcCLFHKXEKAcCVFHKAcrBLC3TASvHSKASCE4CBASCEg9r7AMFGMHSKDNDNADCD9HMBABAZ87EBABCLFAS87EBABCDFAR87EBXEKAIAZbDBAICWFASbDBAICLFARbDBKAVC/ABFAOCITFGaARbDBAaAZbDLAVALCDTFAZbDBAVC/ABFAOCEFCSgCITFGaASbDBAaARbDLAVALCEFGLCSgCDTFARbDBAVC/ABFAOCDFCSgCITFGRAZbDBARASbDLAVALAotAoCSsvFGLCSgCDTFASbDBALAhtAhCSsvFHLAOCIFHOKAWCEFHWABCOFHBAICXFHIAOCSgHOALCSgHLApCIFGpAE6MBKKCBC99AKAQseHOKAVC/AEF8kJJJJBAOK/tLEDU8jJJJJBCZ9rHVC9+HODNAECVFAL0MBCUHOAIrBBC/+EgC/QE9HMBAV9CB83IWAICEFHOAIALFC98FHIDNAEtMBDNADCDsMBINDNAOAI6MBC9+SKAO8sBBGDCfEgHLDNDNADCU9MMBAOCEFHOXEKAO8sBEGDCfBgCRTALCfBgvHLDNADCU9MMBAOCDFHOXEKAO8sBDGDCfBgCpTALvHLDNADCU9MMBAOCIFHOXEKAO8sBIGDCfBgCxTALvHLDNADCU9MMBAOCLFHOXEKAOrBLC3TALvHLAOCVFHOKAVCWFALCEgCDTvGDALCD4CBALCE4CEg9r7ADYDBFGLbDBABALbDBABCLFHBAECUFGEMBXDKKINDNAOAI6MBC9+SKAO8sBBGDCfEgHLDNDNADCU9MMBAOCEFHOXEKAO8sBEGDCfBgCRTALCfBgvHLDNADCU9MMBAOCDFHOXEKAO8sBDGDCfBgCpTALvHLDNADCU9MMBAOCIFHOXEKAO8sBIGDCfBgCxTALvHLDNADCU9MMBAOCLFHOXEKAOrBLC3TALvHLAOCVFHOKABALCD4CBALCE4CEg9r7AVCWFALCEgCDTvGLYDBFGD87EBALADbDBABCDFHBAECUFGEMBKKCBC99AOAIseHOKAOK/xVDIUO978jJJJJBCA9rGI8kJJJJBDNDNADCL9HMBDNAEC98gGLtMBABHDCBHVINADADPBBBGOCkP+rECkP+sEP/6EGRAOCWP+rECkP+sEP/6EARP/gEAOCZP+rECkP+sEP/6EGWP/gEP/kEP/lEGdCBPhP+2EGQARCJJJJ94PhGKP9OP9RP/kEGRjBB/+9CPaARARP/mEAdAdP/mEAWAQAWAKP9OP9RP/kEGRARP/mEP/kEP/kEP/jEP/nEGWP/mEjBBN0PaGQP/kECfEPhP9OAOCJJJ94PhP9OP9QARAWP/mEAQP/kECWP+rECJ/+IPhP9OP9QAdAWP/mEAQP/kECZP+rECJJ/8RPhP9OP9QPKBBADCZFHDAVCLFGVAL6MBKKALAE9PMEAIAECIgGVCDTGDvCBCZAD9r/8KBAIABALCDTFGLAD/8QBBDNAVtMBAIAIPBLBGOCkP+rECkP+sEP/6EGRAOCWP+rECkP+sEP/6EARP/gEAOCZP+rECkP+sEP/6EGWP/gEP/kEP/lEGdCBPhP+2EGQARCJJJJ94PhGKP9OP9RP/kEGRjBB/+9CPaARARP/mEAdAdP/mEAWAQAWAKP9OP9RP/kEGRARP/mEP/kEP/kEP/jEP/nEGWP/mEjBBN0PaGQP/kECfEPhP9OAOCJJJ94PhP9OP9QARAWP/mEAQP/kECWP+rECJ/+IPhP9OP9QAdAWP/mEAQP/kECZP+rECJJ/8RPhP9OP9QPKLBKALAIAD/8QBBXEKABAEC98gGDZ+HJJJBADAE9PMBAIAECIgGLCITGVFCBCAAV9r/8KBAIABADCITFGDAV/8QBBAIALZ+HJJJBADAIAV/8QBBKAICAF8kJJJJBK+yIDDUR97DNAEtMBCBHDINABCZFGIAIPBBBGLCBPhGVCJJ98P3ECJJ98P3IGOP9OABPBBBGRALPMLVORXMpScxql358e8fCffEPhP9OP/6EARALPMBEDIWdQKZhoaky8aeGLCZP+sEP/6EGWP/gEALCZP+rECZP+sEP/6EGdP/gEP/kEP/lEGLjB/+fsPaAdALAVP+2EGVAdCJJJJ94PhGQP9OP9RP/kEGdAdP/mEALALP/mEAWAVAWAQP9OP9RP/kEGLALP/mEP/kEP/kEP/jEP/nEGWP/mEjBBN0PaGVP/kECZP+rEAdAWP/mEAVP/kECffIPhP9OP9QGdALAWP/mEAVP/kECUPSCBPlDCBPlICBPlOCBPlRCBPlQCBPlKCBPlpCBPlSP9OGLPMWdkyQK8aeXM35pS8e8fP9QPKBBABARAOP9OAdALPMBEZhDIoaLVcxORqlP9QPKBBABCAFHBADCLFGDAE6MBKKK94EIU8jJJJJBCA9rGI8kJJJJBABAEC98gGLZ+JJJJBDNALAE9PMBAIAECIgGVCITGEFCBCAAE9r/8KBAIABALCITFGBAE/8QBBAIAVZ+JJJJBABAIAE/8QBBKAICAF8kJJJJBK/hILDUE97EUV978jJJJJBCZ9rHDDNAEtMBCBHIINADABPBBBGLABCZFGVPBBBGOPMLVORXMpScxql358e8fGRCZP+sEGWCLP+rEPKLBABjBBJzPaj/zL81zPaAWCIPhP9QP/6EP/nEGWALAOPMBEDIWdQKZhoaky8aeGLCZP+rECZP+sEP/6EP/mEGOAOP/mEAWALCZP+sEP/6EP/mEGdAdP/mEAWARCZP+rECZP+sEP/6EP/mEGRARP/mEP/kEP/kEP/lECBPhP+4EP/jEjB/+fsPaGWP/mEjBBN0PaGLP/kECffIPhGQP9OAdAWP/mEALP/kECZP+rEP9QGdARAWP/mEALP/kECZP+rEAOAWP/mEALP/kEAQP9OP9QGWPMBEZhDIoaLVcxORqlGLP5BADPBLBPeB+t+J83IBABCWFALP5EADPBLBPeE+t+J83IBAVAdAWPMWdkyQK8aeXM35pS8e8fGWP5BADPBLBPeD+t+J83IBABCkFAWP5EADPBLBPeI+t+J83IBABCAFHBAICLFGIAE6MBKKK/3EDIUE978jJJJJBC/AB9rHIDNADCD4AE2GLC98gGVtMBCBHDABHEINAEAEPBBBGOCWP+rECWP+sEP/6EAOCkP+sEClP+rECJJJ/8IPhP+uEP/mEPKBBAECZFHEADCLFGDAV6MBKKDNAVAL9PMBAIALCIgGDCDTGEvCBC/ABAE9r/8KBAIABAVCDTFGVAE/8QBBDNADtMBAIAIPBLBGOCWP+rECWP+sEP/6EAOCkP+sEClP+rECJJJ/8IPhP+uEP/mEPKLBKAVAIAE/8QBBKK9TEIUCBCBYDJ1JJBGEABCIFC98gFGBbDJ1JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIKKKEBCJWKLZ9tBB");var a,n=WebAssembly.instantiate(function(t){for(var r=new Uint8Array(t.length),a=0;a<t.length;++a){var n=t.charCodeAt(a);r[a]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}var A=0;for(a=0;a<t.length;++a)r[A++]=r[a]<60?e[r[a]]:64*(r[a]-60)+r[++a];return r.buffer.slice(0,A)}(r),{}).then((function(t){(a=t.instance).exports.__wasm_call_ctors()}));function A(t,e,r,n,A,B){var E=a.exports.sbrk,o=r+3&-4,i=E(o*n),C=E(A.length),s=new Uint8Array(a.exports.memory.buffer);s.set(A,C);var y=t(i,r,n,C,A.length);if(0==y&&B&&B(i,o,n),e.set(s.subarray(i,i+r*n)),E(i-E(0)),0!=y)throw new Error("Malformed buffer data: "+y)}var B={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},E={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:n,supported:!0,decodeVertexBuffer:function(t,e,r,n,E){A(a.exports.meshopt_decodeVertexBuffer,t,e,r,n,a.exports[B[E]])},decodeIndexBuffer:function(t,e,r,n){A(a.exports.meshopt_decodeIndexBuffer,t,e,r,n)},decodeIndexSequence:function(t,e,r,n){A(a.exports.meshopt_decodeIndexSequence,t,e,r,n)},decodeGltfBuffer:function(t,e,r,n,o,i){A(a.exports[E[o]],t,e,r,n,a.exports[B[i]])}}}(),yt={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3,getMorphTime:function(t){return t===yt.SCENE3D?1:t===yt.MORPHING?void 0:0}},lt=Object.freeze(yt),ut=1,Pt=2,ft={};ft[0]=L.PixelFormat.RGB_DXT1,ft[ut]=L.PixelFormat.RGBA_DXT3,ft[Pt]=L.PixelFormat.RGBA_DXT5;var ct,dt=0,Tt=!1;function pt(t,e){var r=t.data,n=r.byteLength,A=new Uint8Array(r),B=ct._malloc(n);!function(t,e,r,a){var n,A=r/4,B=a%4,E=new Uint32Array(t.buffer,0,(a-B)/4),o=new Uint32Array(e.buffer);for(n=0;n<E.length;n++)o[A+n]=E[n];for(n=a-B;n<a;n++)e[r+n]=t[n]}(A,ct.HEAPU8,B,n);var E=ct._crn_get_dxt_format(B,n),o=ft[E];if(!a.e(o))throw new P.t("Unsupported compressed format.");var i,C=ct._crn_get_levels(B,n),s=ct._crn_get_width(B,n),y=ct._crn_get_height(B,n),l=0;for(i=0;i<C;++i)l+=L.PixelFormat.compressedTextureSizeInBytes(o,s>>i,y>>i);if(dt<l&&(a.e(ot)&&ct._free(ot),ot=ct._malloc(l),it=new Uint8Array(ct.HEAPU8.buffer,ot,l),dt=l),ct._crn_decompress(B,n,ot,l,0,C),ct._free(B),a.u(t.bMipMap,!1)){var u=it.slice(0,l);return e.push(u.buffer),new D.e(o,s,y,u)}var f=L.PixelFormat.compressedTextureSizeInBytes(o,s,y),c=it.subarray(0,f),d=new Uint8Array(f);return d.set(c,0),e.push(d.buffer),new D.e(o,s,y,d)}var Dt,Lt=1,gt=0,Ft=1,It=2,Mt=3,vt=0,mt=1,_t=2;new i.e;var St,Ot=!1,Nt=null;const Rt=33776,ht=33779,bt=38e3,Gt=38001,Ut=38002,xt=5e4;function Kt(t){let e=d.S3MPixelFormat.NONE;switch(t){case Rt:case ht:e=d.S3MPixelFormat.BGRA;break;case bt:e=d.S3MPixelFormat.WEBP;break;case Gt:e=d.S3MPixelFormat.STANDARD_CRN;break;case Ut:e=d.S3MPixelFormat.KTX2;break;case xt:e=d.S3MPixelFormat.CRN_DXT5;break;default:e=d.S3MPixelFormat.NONE}return e}function Ht(t,e,r,a,n,A){this.left=t,this.bottom=e,this.right=r,this.top=a,this.minHeight=n,this.maxHeight=A,this.width=r-t,this.length=a-e,this.height=A-n}function wt(t,e,r){var a=r,n=t.getUint32(a,!0),A=a+=Uint32Array.BYTES_PER_ELEMENT,B=new Uint8Array(e,a,n);return{dataViewByteOffset:A,byteOffset:a+=n*Uint8Array.BYTES_PER_ELEMENT,buffer:B}}function Vt(t,e,r,a){var n=t.getUint32(a+e,!0);a+=Uint32Array.BYTES_PER_ELEMENT;var A=r.subarray(a,a+n);return{string:s.a(A),bytesOffset:a+=n}}function Yt(t,e,r,a,n,A){var B=r,E=t.getUint16(r+a,!0);B+=Uint16Array.BYTES_PER_ELEMENT,A||(B+=Uint16Array.BYTES_PER_ELEMENT);for(var o=0;o<E;o++){var i=t.getUint32(B+a,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var s=t.getUint16(B+a,!0);if(B+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(B+a,!0),B+=Uint16Array.BYTES_PER_ELEMENT,20==s||35==s);else{var y=i*s*Float32Array.BYTES_PER_ELEMENT,l=e.subarray(B,B+y);B+=y;var u="aTexCoord"+o,P=n.vertexAttributes,f=n.attrLocation;f[u]=P.length,P.push({index:f[u],typedArray:l,componentsPerAttribute:s,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:s*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}}return{bytesOffset:B}}function Jt(t,e,r,a,n,A){var B=r,E=t.getUint16(B+a,!0);B+=Uint16Array.BYTES_PER_ELEMENT,B+=Uint16Array.BYTES_PER_ELEMENT;for(var o=n.vertexAttributes,i=n.attrLocation,s=0;s<E;s++){var y=t.getUint32(B+a,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var l=t.getUint16(B+a,!0);if(B+=Uint16Array.BYTES_PER_ELEMENT,16===l){B-=Uint16Array.BYTES_PER_ELEMENT;var u=3===A?Uint16Array.BYTES_PER_ELEMENT:Uint32Array.BYTES_PER_ELEMENT,P=y*(l*Float32Array.BYTES_PER_ELEMENT+u),f=e.subarray(B,B+P);B+=P;var c=new Uint8Array(Float32Array.BYTES_PER_ELEMENT*l*y);n.instanceCount=y,n.instanceMode=l,n.instanceBuffer=c,n.instanceIndex=1;for(var d=Float32Array.BYTES_PER_ELEMENT*l+u,T=0;T<y;T++){var p=T*d+u,D=f.subarray(p,p+d);c.set(D,T*(d-u))}L=16*Float32Array.BYTES_PER_ELEMENT,i.uv2=o.length,o.push({index:i.uv2,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:L,instanceDivisor:1}),i.uv3=o.length,o.push({index:i.uv3,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv4=o.length,o.push({index:i.uv4,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.secondary_colour=o.length,o.push({index:i.secondary_colour,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1})}else{t.getUint16(B+a,!0),B+=Uint16Array.BYTES_PER_ELEMENT;P=y*l*Float32Array.BYTES_PER_ELEMENT;if(17===l||29===l){var L;c=e.subarray(B,B+P);n.instanceCount=y,n.instanceMode=l,n.instanceBuffer=c,n.instanceIndex=1,17===l?(L=17*Float32Array.BYTES_PER_ELEMENT,i.uv2=o.length,o.push({index:i.uv2,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:L,instanceDivisor:1}),i.uv3=o.length,o.push({index:i.uv3,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv4=o.length,o.push({index:i.uv4,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.secondary_colour=o.length,o.push({index:i.secondary_colour,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv6=o.length,o.push({index:i.uv6,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1})):29===l&&(L=29*Float32Array.BYTES_PER_ELEMENT,i.uv1=o.length,o.push({index:i.uv1,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:L,instanceDivisor:1,byteLength:P}),i.uv2=o.length,o.push({index:i.uv2,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv3=o.length,o.push({index:i.uv3,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv4=o.length,o.push({index:i.uv4,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv5=o.length,o.push({index:i.uv5,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv6=o.length,o.push({index:i.uv6,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:20*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv7=o.length,o.push({index:i.uv7,componentsPerAttribute:3,componentDatatype:C.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:24*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.secondary_colour=o.length,o.push({index:i.secondary_colour,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:27*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv9=o.length,o.push({index:i.uv9,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:28*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}))}else{var g=y*l;n.instanceBounds=new Float32Array(g);for(var F=0;F<g;F++)n.instanceBounds[F]=t.getFloat32(B+a+F*Float32Array.BYTES_PER_ELEMENT,!0)}B+=P}}return{bytesOffset:B}}var kt=new E.t(40680631590769,40680631590769,40408299984661.445),Wt=new E.t,Zt=new E.t;function Xt(t,e,r,n){var A=Math.cos(e);Wt.x=A*Math.cos(t),Wt.y=A*Math.sin(t),Wt.z=Math.sin(e),Wt=E.t.normalize(Wt,Wt),E.t.multiplyComponents(kt,Wt,Zt);var B=Math.sqrt(E.t.dot(Wt,Zt));return Zt=E.t.divideByScalar(Zt,B,Zt),Wt=E.t.multiplyByScalar(Wt,r,Wt),a.e(n)||(n=new E.t),E.t.add(Zt,Wt,n)}var Qt=new E.t,zt=new E.t$1,jt=new A.y,qt=new A.y;function $t(t,e,r,n,B,i,s,y,l){var u=n,P=e.getUint32(u+r,!0);if(B.verticesCount=P,u+=Uint32Array.BYTES_PER_ELEMENT,P<=0)return{bytesOffset:u};var c=e.getUint16(u+r,!0);u+=Uint16Array.BYTES_PER_ELEMENT;var d=e.getUint16(u+r,!0);d=c*Float32Array.BYTES_PER_ELEMENT,u+=Uint16Array.BYTES_PER_ELEMENT;var T=P*c*Float32Array.BYTES_PER_ELEMENT,p=t.subarray(u,u+T);u+=T;var D=B.vertexAttributes,L=B.attrLocation,g=void 0,F=void 0;if(s){g=new E.t$1,F=new E.t$1;var I=new Float32Array(2*P),M=new Float64Array(2*P);if(a.e(y)){var v=new Float32Array(p.byteLength/4),m=new Float32Array(p.buffer,p.byteOffset,p.byteLength/4);k=3===c?E.t.unpackArray(m):o.e.unpackArray(m);var _=A.y.multiply(y.sphereMatrix,y.geoMatrix,jt),S=A.y.multiply(y.ellipsoidMatrix,y.geoMatrix,qt);A.y.inverse(S,S);for(var O=new f.t(6378137,6378137,6378137),N=0,R=0,h=k.length;R<h;R++){var b=k[R];A.y.multiplyByPoint(_,b,Qt);var G=Xt((W=O.cartesianToCartographic(Qt,zt)).longitude,W.latitude,W.height,Qt);A.y.multiplyByPoint(S,G,b),3===c?(E.t.pack(b,v,N),N+=3):(o.e.pack(b,v,N),N+=4),M[2*R]=W.longitude,M[2*R+1]=W.latitude,0===R?(g.longitude=W.longitude,g.latitude=W.latitude,F.longitude=W.longitude,F.latitude=W.latitude):(g.longitude=Math.max(W.longitude,g.longitude),g.latitude=Math.max(W.latitude,g.latitude),F.longitude=Math.min(W.longitude,F.longitude),F.latitude=Math.min(W.latitude,F.latitude))}p=v}else{var U=new E.t,x=new E.t,K=new Float32Array(p.buffer,p.byteOffset,p.byteLength/4),H=new E.t$1;O=Re?new f.t(6378137,6378137,6356752.314245179):new f.t(6378137,6378137,6378137);for(var w=0;w<P;w++)A.y.multiplyByPoint(i,E.t.fromElements(K[c*w],K[c*w+1],K[c*w+2],U),x),H=O.cartesianToCartographic(x,zt),M[2*w]=H.longitude,M[2*w+1]=H.latitude,0===w?(g.longitude=H.longitude,g.latitude=H.latitude,F.longitude=H.longitude,F.latitude=H.latitude):(g.longitude=Math.max(H.longitude,g.longitude),g.latitude=Math.max(H.latitude,g.latitude),F.longitude=Math.min(H.longitude,F.longitude),F.latitude=Math.min(H.latitude,F.latitude))}for(w=0;w<P;w++)I[2*w]=M[2*w]-F.longitude,I[2*w+1]=M[2*w+1]-F.latitude;L.aPosition=D.length,D.push({index:L.aPosition,typedArray:p,componentsPerAttribute:c,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:d,normalize:!1}),L.img=D.length,D.push({index:L.img,typedArray:I,componentsPerAttribute:2,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}else{if(3===c&&a.e(i)){x=new E.t,K=new Float32Array(p.buffer,p.byteOffset,p.byteLength/4);for(var V=new Float32Array(p.byteLength/4+P),Y=K.length,J=(w=0,0);w<Y;w+=3,J+=4)V[J]=K[w],V[J+1]=K[w+1],V[J+2]=K[w+2],A.y.multiplyByPoint(i,E.t.fromElements(V[J],V[J+1],V[J+2],U),x),V[J+3]=E.t$1.fromCartesian(x).height;p=V,d=(c=4)*Float32Array.BYTES_PER_ELEMENT}if(a.e(y)){var k;v=new Float32Array(p.byteLength/4),m=new Float32Array(p.buffer,p.byteOffset,p.byteLength/4);k=3===c?E.t.unpackArray(m):o.e.unpackArray(m);_=A.y.multiply(y.sphereMatrix,y.geoMatrix,jt),S=A.y.multiply(y.ellipsoidMatrix,y.geoMatrix,qt);A.y.inverse(S,S);for(O=new f.t(6378137,6378137,6378137),N=0,R=0,h=k.length;R<h;R++){b=k[R];A.y.multiplyByPoint(_,b,Qt);var W;G=Xt((W=O.cartesianToCartographic(Qt,zt)).longitude,W.latitude,W.height,Qt);A.y.multiplyByPoint(S,G,b),3===c?(E.t.pack(b,v,N),N+=3):(o.e.pack(b,v,N),N+=4)}p=v}L.aPosition=D.length,D.push({index:L.aPosition,typedArray:p,componentsPerAttribute:c,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:d,normalize:!1})}return{bytesOffset:u,cartographicBounds:{max:g,min:F}}}function te(t,e,r,a,n,A){var B=a,E=e.getUint32(B+r,!0);if(B+=Uint32Array.BYTES_PER_ELEMENT,E<=0)return{bytesOffset:B};var o=e.getUint16(B+r,!0);B+=Uint16Array.BYTES_PER_ELEMENT;var i=e.getUint16(B+r,!0);B+=Uint16Array.BYTES_PER_ELEMENT;var s=E*o*Float32Array.BYTES_PER_ELEMENT,y=t.subarray(B,B+s);let l=new Float32Array(y.buffer,y.byteOffset,3);B+=s;let u=A!==Q.Text&&0===l[0]&&0===l[1]&&0===l[2];if(!n.ignoreNormal&&!u){var P=n.vertexAttributes,f=n.attrLocation;f.aNormal=P.length,P.push({index:f.aNormal,typedArray:y,componentsPerAttribute:o,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:i,normalize:!1})}return{bytesOffset:B}}var ee={0:Uint32Array.BYTES_PER_ELEMENT,1:Float32Array.BYTES_PER_ELEMENT,2:Float64Array.BYTES_PER_ELEMENT,3:Uint16Array.BYTES_PER_ELEMENT,4:Uint8Array.BYTES_PER_ELEMENT};const re={0:C.ComponentDatatype.UNSIGNED_INT,1:C.ComponentDatatype.FLOAT,2:C.ComponentDatatype.DOUBLE,3:C.ComponentDatatype.SHORT,4:C.ComponentDatatype.UNSIGNED_BYTE};function ae(t,e,r,a,n){var A,B=a,E=e.getUint32(B+r,!0);if(B+=Uint32Array.BYTES_PER_ELEMENT,n.verticesCount,E>0){e.getUint16(B+r,!0),B+=Uint16Array.BYTES_PER_ELEMENT,B+=2*Uint8Array.BYTES_PER_ELEMENT;var o=E*Uint8Array.BYTES_PER_ELEMENT*4;A=_(t,B,B+o),B+=o;var i=n.vertexAttributes,s=n.attrLocation;s.aColor=i.length,i.push({index:s.aColor,typedArray:A,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:4,normalize:!0})}return{bytesOffset:B}}function ne(t,e,r,a,n){var A=a,B=e.getUint32(A+r,!0);return A+=Uint32Array.BYTES_PER_ELEMENT,B<=0?{bytesOffset:A}:(e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT,A+=2*Uint8Array.BYTES_PER_ELEMENT,{bytesOffset:A+=B*Uint8Array.BYTES_PER_ELEMENT*4})}function Ae(t,e,r,a,n){var A=n,B=[],E=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var o=0;o<E;o++){var i={};t>=3&&(r.getUint32(A+a,!0),A+=Uint32Array.BYTES_PER_ELEMENT);var C=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var s=r.getUint8(A+a,!0);A+=Uint8Array.BYTES_PER_ELEMENT,r.getUint8(A+a,!0),A+=Uint8Array.BYTES_PER_ELEMENT;var y=r.getUint8(A+a,!0);if(A+=Uint8Array.BYTES_PER_ELEMENT,A+=Uint8Array.BYTES_PER_ELEMENT,C>0){var l=0,u=null;1===s||3===s?(l=C*Uint32Array.BYTES_PER_ELEMENT,u=e.subarray(A,A+l)):(l=C*Uint16Array.BYTES_PER_ELEMENT,u=e.subarray(A,A+l),C%2!=0&&(l+=2)),i.indicesTypedArray=u,A+=l}i.indicesCount=C,i.indexType=s,i.primitiveType=y;var P=[],f=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var c=0;c<f;c++){var d=Vt(r,a,e,A),T=d.string;A=d.bytesOffset,P.push(T),i.materialCode=T}if(0===f&&(i.materialCode="OSGBEmpty"),B.push(i),0!==A%4)A+=4-A%4}return{bytesOffset:A,arrIndexPackage:B}}function Be(t){let{version:e,typedArray:r,view:n,viewByteOffset:B,bufferByteOffset:i,vertexPackage:s,isOldVersion:y,scratchMat:u,bCoverImageryLayer:P,transformPar:c,fileType:d}=t,T=u;var p,D,L=i,g=n.getUint32(L+B,!0);return s.nCompressOptions=g,L+=Uint32Array.BYTES_PER_ELEMENT,(g&l.VertexCompressOption.SVC_Vertex)==l.VertexCompressOption.SVC_Vertex?(p=function(t,e,r,n,B,i,s){var y=n,l=e.getUint32(y+r,!0);if(B.verticesCount=l,y+=Uint32Array.BYTES_PER_ELEMENT,l<=0)return{bytesOffset:y};var u=e.getUint16(y+r,!0);y+=Uint16Array.BYTES_PER_ELEMENT;var P=e.getUint16(y+r,!0);P=u*Int16Array.BYTES_PER_ELEMENT,y+=Uint16Array.BYTES_PER_ELEMENT;var c=e.getFloat32(y+r,!0);y+=Float32Array.BYTES_PER_ELEMENT;var d=new o.e;d.x=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,d.y=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,d.z=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,d.w=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,B.vertCompressConstant=c,B.minVerticesValue=d;var T=l*u*Int16Array.BYTES_PER_ELEMENT,p=t.subarray(y,y+T);if(y+=T,a.e(i)){var D=new Uint16Array(p.byteLength/2),L=new Uint16Array(p.buffer,p.byteOffset,p.byteLength/2),g=o.e.unpackArray(L);for(let t=0,e=g.length;t<e;t++){let e=g[t];E.t.multiplyByScalar(e,c,e),E.t.add(e,d,e)}var F=A.y.multiply(i.sphereMatrix,i.geoMatrix,jt),I=A.y.multiply(i.ellipsoidMatrix,i.geoMatrix,qt);A.y.inverse(I,I);var M=new f.t(6378137,6378137,6378137),v=0;for(let t=0,e=g.length;t<e;t++){let e=g[t];A.y.multiplyByPoint(F,e,Qt);let r=M.cartesianToCartographic(Qt,zt),a=Xt(r.longitude,r.latitude,r.height,Qt);A.y.multiplyByPoint(I,a,e),E.t.subtract(e,d,e),E.t.divideByScalar(e,c,e),o.e.pack(e,D,v),v+=4}p=D}var m=B.vertexAttributes,_=B.attrLocation;return _.aPosition=m.length,m.push({index:_.aPosition,typedArray:p,componentsPerAttribute:u,componentDatatype:C.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:P,normalize:!1}),{bytesOffset:y}}(r,n,B,L,s,c),L=p.bytesOffset):(L=(p=$t(r,n,B,L,s,T,P,c)).bytesOffset,D=p.cartographicBounds),(g&l.VertexCompressOption.SVC_Normal)==l.VertexCompressOption.SVC_Normal?(p=function(t,e,r,a,n){var A=a,B=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,B<=0)return{bytesOffset:A};e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT;var E=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var o=2*B*Int16Array.BYTES_PER_ELEMENT,i=t.subarray(A,A+o);if(A+=o,!n.ignoreNormal){var s=n.vertexAttributes,y=n.attrLocation;y.aNormal=s.length,s.push({index:y.aNormal,typedArray:i,componentsPerAttribute:2,componentDatatype:C.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:E,normalize:!1})}return{bytesOffset:A}}(r,n,B,L,s),L=p.bytesOffset):L=(p=te(r,n,B,L,s,d)).bytesOffset,L=(p=ne(0,n,B,L=(p=ae(r,n,B,L,s)).bytesOffset)).bytesOffset,(g&l.VertexCompressOption.SVC_TexutreCoord)==l.VertexCompressOption.SVC_TexutreCoord?(p=function(t,e,r,a,n){n.texCoordCompressConstant=[],n.minTexCoordValue=[];var A=r,B=t.getUint16(r+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,A+=Uint16Array.BYTES_PER_ELEMENT;for(var E=0,i=0;i<B;i++){var s=t.getUint8(A+a,!0);A+=Uint8Array.BYTES_PER_ELEMENT,A+=3*Uint8Array.BYTES_PER_ELEMENT;var y=t.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var l=t.getUint16(A+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(A+a,!0),A+=Uint16Array.BYTES_PER_ELEMENT;var u=t.getFloat32(A+a,!0);A+=Float32Array.BYTES_PER_ELEMENT,n.texCoordCompressConstant.push(u);var P=new o.e;P.x=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,P.y=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,P.z=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,P.w=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,n.minTexCoordValue.push(P);var f=y*l*Int16Array.BYTES_PER_ELEMENT,c=e.subarray(A,A+f),d=(A+=f)%4;0!==d&&(A+=4-d);var T="aTexCoord"+E,p=n.vertexAttributes,D=n.attrLocation;if(D[T]=p.length,p.push({index:D[T],typedArray:c,componentsPerAttribute:l,componentDatatype:C.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:l*Int16Array.BYTES_PER_ELEMENT,normalize:!1}),s){f=y*Float32Array.BYTES_PER_ELEMENT;var L=e.subarray(A,A+f);A+=f,n.texCoordZMatrix=!0,D[T="aTexCoordZ"+E]=p.length,p.push({index:D[T],typedArray:L,componentsPerAttribute:1,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:Float32Array.BYTES_PER_ELEMENT,normalize:!1})}E++}return{bytesOffset:A}}(n,r,L,B,s),L=p.bytesOffset):L=(p=Yt(n,r,L,B,s,y)).bytesOffset,(g&l.VertexCompressOption.SVC_TexutreCoordIsW)==l.VertexCompressOption.SVC_TexutreCoordIsW&&(s.textureCoordIsW=!0),{bytesOffset:L=(p=Jt(n,r,L,B,s,e)).bytesOffset,cartographicBounds:D}}function Ee(t,e,r,a,n,A,B,E,o,i,C){t>=3&&(r.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT);var s,y=n;y=(s=$t(e,r,a,y,A,E,o,i)).bytesOffset;var l=s.cartographicBounds;if(y=(s=ae(e,r,a,y=(s=te(e,r,a,y,A,C)).bytesOffset,A)).bytesOffset,t<3&&(y=(s=ne(0,r,a,y)).bytesOffset),y=(s=Jt(r,e,y=(s=Yt(r,e,y,a,A,B)).bytesOffset,a,A,t)).bytesOffset,t>=3&&(s=function(t,e,r,a,n){var A=a,B=e.getUint32(A+r,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var E=0;E<B;E++){var o=e.getUint32(A+r,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var i=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var C=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var s=o*i*ee[C],y=t.subarray(A,A+s);A+=s;let a=re[C];n.customAttributesArr.push({typedArray:y,componentsPerAttribute:i,componentDatatype:a,offsetInBytes:0,strideInBytes:0,normalize:!1})}return{bytesOffset:A}}(e,r,a,y,A),y=s.bytesOffset),t>=3){var u=Vt(r,a,e,y);y=u.bytesOffset,A.customVertexAttribute=""===u.string?{}:JSON.parse(u.string),Te(A);var P=(y+a)%4;P&&(P=4-P),y+=P}return t>=3&&(s=function(t,e,r,a,n){var A=a,B=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,B<=0)return{bytesOffset:A};var E=e.getUint16(A+r,!0);return A+=Uint16Array.BYTES_PER_ELEMENT,e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT,{bytesOffset:A+=B*E*Float32Array.BYTES_PER_ELEMENT}}(0,r,a,y),y=s.bytesOffset),{bytesOffset:y,cartographicBounds:l}}function oe(t){return 0!==t.length&&"ClampGroundAndObjectLinePass"===t[0].materialCode}var ie=1,Ce=4,se=8,ye=16,le=32,ue=64,Pe=128,fe=512,ce=1024;const de={VertexWeight:"aVertexWeight",PointCloudIntensity:"aIntensity",TextureCoordMatrix:"aTextureCoordMatrix",VertexWeight_1:"aVertexWeight_1"};function Te(t){let e=t.customAttributesArr,r=t.customVertexAttribute;if(!a.e(r)||!a.e(e)||e.length<1)return;let n=t.vertexAttributes;for(let a in r){let A=de[a];if(void 0===A)continue;let B=e[r[a]];B.index=n.length,n.push(B),t.attrLocation[A]=B.index}}function pe(t,e,r,n,i,s,y,u,P,f,c,d,T,p){var D=t,L=0,g=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,f=a.u(f,a.u.EMPTY_OBJECT);for(var F=void 0,I=0;I<g;I++){u>=3&&(e.getUint32(L+r,!0),L+=Uint32Array.BYTES_PER_ELEMENT);var M=(ht=Vt(e,r,D,L)).string;if(a.e(P)){var v=a.u(f[M],A.y.IDENTITY);F=new A.y,A.y.multiply(P,v,F)}a.e(T)&&(T.geoMatrix=a.u(f[M],A.y.IDENTITY));var m=(L=ht.bytesOffset)%4;0!==m&&(L+=4-m);var S=gt;if(S=e.getUint32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,(ne={vertexAttributes:[],attrLocation:{},instanceCount:0,instanceMode:0,instanceIndex:-1}).ignoreNormal=n.ignoreNormal,ne.customAttributesArr=[],u>=3)switch(S){case vt:S=Ft;break;case mt:S=Mt;break;case _t:S=It}if(S===Mt){u>=3&&(e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT),u>=2&&(e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT);var O,N={};N.posUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,N.normalUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,N.colorUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,u<=3&&(N.secondColorUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT),u>=3?(O=e.getUint32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT):(O=e.getUint16(L+r,!0),L+=Int16Array.BYTES_PER_ELEMENT);for(var R=[],b=0;b<O;b++){var G=e.getInt32(L+r,!0);R.push(G),L+=Int32Array.BYTES_PER_ELEMENT}N.texCoordUniqueIDs=R;var U=[];if(u>=3){var x=e.getUint32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;for(var K=0;K<x;K++){var H=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT,U.push(H)}}N.vertexAttrUniqueIDs=U;var w=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;var V=[],Y={};if(w>0){var J=(k=Vt(e,r,D,L)).string;L=k.bytesOffset,Y.materialCode=J,V.push(Y)}u>=3&&((xt=(L+r)%4)&&(xt=4-xt),L+=xt);var k,W=new Object,Z=e.getUint32(L+r,!0),X=_(D,L+=Int32Array.BYTES_PER_ELEMENT,L+Z);if(w>0?h.dracoDecodeMesh(Dt,X,Z,ne,Y,N,F,c,W,T):h.dracoDecodePointCloud(Dt,X,Z,ne,N),a.e(W.min)&&a.e(W.max)||(W=void 0),L+=Z,u>=3)(xt=(L+r)%4)&&(xt=4-xt),L=(k=Vt(e,r,D,L+=xt)).bytesOffset,ne.customVertexAttribute=JSON.parse(k.string),Te(ne),(xt=(L+r)%4)&&(xt=4-xt),L+=xt;n[M]={vertexPackage:ne,arrIndexPackage:V,cartographicBounds:W}}else if(S==It&&u>=3){var Q=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT;var z=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,ne.minVerticesValue=new o.e,ne.minTexCoordValue=[new B.o,new B.o],ne.texCoordCompressConstant=[new E.t,new E.t];V=[];for(var j=0;j<z;j++){var q=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,ne.vertCompressConstant=e.getFloat32(L+r,!0),L+=Float32Array.BYTES_PER_ELEMENT,ne.minVerticesValue.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ne.minVerticesValue.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ne.minVerticesValue.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var $=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var tt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var et=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var rt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var at=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var nt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var At=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var Bt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT,ne.minTexCoordValue[0].x=et,ne.minTexCoordValue[0].y=rt,ne.minTexCoordValue[1].x=At,ne.minTexCoordValue[1].y=Bt,ne.texCoordCompressConstant[0].x=$,ne.texCoordCompressConstant[0].y=tt,ne.texCoordCompressConstant[1].x=at,ne.texCoordCompressConstant[1].y=nt;var Et=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;W=new Object;for(var ot=0;ot<Et;ot++){var it=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;var Ct=it,yt=0;Ct!=fe&&Ct!=ce||(yt=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT);var lt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;var ut=new Uint8Array(e.buffer,L+r,lt);(xt=((L+=Uint8Array.BYTES_PER_ELEMENT*lt)+r)%4)&&(xt=4-xt),L+=xt,Le(q,Ct,yt,ut,ne,Q,T,c,W,F,p)}L=(Ut=Vt(e,r,D,L)).bytesOffset,ne.customVertexAttribute=JSON.parse(Ut.string),Te(ne),(xt=(L+r)%4)&&(xt=4-xt),L+=xt;var Pt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;for(var ft=0;ft<Pt;ft++){Y={};var ct=e.getInt32(L+r,!0);if(L+=Int32Array.BYTES_PER_ELEMENT,ct>0){var dt=e.getInt8(L+r,!0);L+=Int8Array.BYTES_PER_ELEMENT,e.getInt8(L+r,!0),L+=Int8Array.BYTES_PER_ELEMENT;var Tt=e.getInt8(L+r,!0);L+=Int8Array.BYTES_PER_ELEMENT,e.getInt8(L+r,!0),L+=Int8Array.BYTES_PER_ELEMENT;var pt,Lt,St=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT,13!==Tt?(pt=new Uint8Array(e.buffer,L+r,St),L+=Uint8Array.BYTES_PER_ELEMENT*St):(pt=new Uint32Array(e.buffer,L+r,St),L+=Uint32Array.BYTES_PER_ELEMENT*St),(xt=(L+r)%4)&&(xt=4-xt),L+=xt,13!==Tt?(Lt=C.ComponentDatatype.createTypedArray(C.ComponentDatatype.UNSIGNED_BYTE,ct*Uint32Array.BYTES_PER_ELEMENT),st.decodeIndexBuffer(Lt,ct,Uint32Array.BYTES_PER_ELEMENT,pt)):Lt=pt;var Ot,Nt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT,Y.indexType=dt,0===dt?Ot=new Uint16Array(ct):1===dt&&(Ot=new Uint32Array(ct)),Y.indicesCount=ct;var Rt=new Uint32Array(Lt.buffer,Lt.byteOffset,Lt.byteLength/4);Ot.set(Rt,0),Y.indicesTypedArray=Ot,Y.primitiveType=Tt;for(ot=0;ot<Nt;ot++){var ht;J=(ht=Vt(e,r,D,L)).string;L=ht.bytesOffset,Y.materialCode=J}if(V.length>0&&13!==Tt){var bt=ne.preVertexCount;Y.indicesTypedArray=Rt.map((function(t){return t+bt})),Y.indexType=1}V.push(Y),(xt=(L+r)%4)&&(xt=4-xt),L+=xt}}}u>3&&(L=Jt(e,D,L,r,ne,u).bytesOffset),ne.nCompressOptions=Q,2===V.length&&13===V[1].primitiveType&&V[1].indicesCount>=3&&(Gt=l._0x48a01b.createEdgeDataByIndices(ne,V[1],s)),a.e(W.min)&&a.e(W.max)||(W=void 0),n[M]={vertexPackage:ne,arrIndexPackage:V,edgeGeometry:Gt,cartographicBounds:W}}else{var Gt;if(S===Ft||S===gt)L=(ht=Ee(u,D,e,r,L,ne,i,F,c,T,d)).bytesOffset,W=ht.cartographicBounds;else if(S===It){var Ut,xt;if(L=(ht=Be({version:u,typedArray:D,view:e,viewByteOffset:r,bufferByteOffset:L,vertexPackage:ne,isOldVersion:i,scratchMat:F,bCoverImageryLayer:c,transformPar:T,fileType:d})).bytesOffset,W=ht.cartographicBounds,u>=3)L=(Ut=Vt(e,r,D,L)).bytesOffset,ne.customVertexAttribute=JSON.parse(Ut.string),Te(ne),(xt=(L+r)%4)&&(xt=4-xt),L+=xt}oe(V=(ht=Ae(u,D,e,r,L)).arrIndexPackage)&&(ne.clampRegionEdge=!0),2===V.length&&13===V[1].primitiveType&&V[1].indicesCount>=3&&(Gt=l._0x48a01b.createEdgeDataByIndices(ne,V[1],s)),L=ht.bytesOffset,a.e(W)&&a.e(W.min)&&a.e(W.max)||(W=void 0),n[M]={vertexPackage:ne,arrIndexPackage:V,edgeGeometry:Gt,cartographicBounds:W}}if(u<3&&a.e(y)&&y){var Kt=e.getUint16(L+r,!0);if(L+=Uint16Array.BYTES_PER_ELEMENT,1===Kt){var Ht=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT;var wt,Yt=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,e.getFloat32(L+r,!0),L+=Float32Array.BYTES_PER_ELEMENT;var kt=new Array(Ht),Wt=new Array(Ht),Zt=new Array(Ht),Xt=new Array(Ht);for(wt=0;wt<Ht;wt++){var Qt=e.getFloat32(L+r,!0);L+=Float32Array.BYTES_PER_ELEMENT,kt[wt]=Qt;var zt=e.getUint16(L+r,!0);L+=Uint16Array.BYTES_PER_ELEMENT,Wt[wt]=zt;var jt=e.getUint16(L+r,!0);L+=Uint16Array.BYTES_PER_ELEMENT,Zt[wt]=jt;for(var qt=jt*Yt,$t=new Array(qt),te=0;te<qt;te++){var ee=e.getFloat32(L+r,!0);L+=Float32Array.BYTES_PER_ELEMENT,$t[te]=ee}Xt[wt]=$t}}var re=new E.t,ae=new E.t;re.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,re.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,re.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ae.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ae.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ae.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,n[M].min=re,n[M].max=ae;var ne=n[M].vertexPackage;a.e(ne.instanceBuffer)&&2===u&&(ne.instanceBounds=new Float32Array(6),E.t.pack(re,ne.instanceBounds,0),E.t.pack(ae,ne.instanceBounds,3))}if(u>=3){var ie=new E.t;ie.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ie.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ie.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var Ce=new E.t;Ce.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,Ce.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,Ce.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var se=new E.t;se.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,se.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,se.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var ye=new E.t;ye.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ye.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ye.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT}}}function De(t,e,r){var a=t.typedArray,n=new r(a.length+e.length);n.set(a,0),n.set(e,a.length),t.typedArray=n}function Le(t,e,r,n,B,o,i,s,y,l,u){var P,c=0,d=B.vertexAttributes,T=B.attrLocation;switch(e){case Ce:case se:case ye:case le:c=2*Uint16Array.BYTES_PER_ELEMENT,0!=(16&o)||e!==ye&&e!==le||(c=2*Float32Array.BYTES_PER_ELEMENT),P=C.ComponentDatatype.createTypedArray(C.ComponentDatatype.UNSIGNED_BYTE,t*c);break;case ue:case Pe:c=4*Uint8Array.BYTES_PER_ELEMENT,P=C.ComponentDatatype.createTypedArray(C.ComponentDatatype.UNSIGNED_BYTE,4*t);break;case fe:case ce:c=Float32Array.BYTES_PER_ELEMENT*r,P=C.ComponentDatatype.createTypedArray(C.ComponentDatatype.UNSIGNED_BYTE,t*r*4);break;default:c=4*Uint16Array.BYTES_PER_ELEMENT,P=C.ComponentDatatype.createTypedArray(C.ComponentDatatype.UNSIGNED_BYTE,t*c)}switch(st.decodeVertexBuffer(P,t,c,n,n.length),e){case ie:var p=new Uint16Array(P.buffer,0,P.length/2),D=C.ComponentDatatype.SHORT;if(void 0!==(R=T.aPosition)?(De(d[R],p,Uint16Array),B.preVertexCount=B.verticesCount,B.verticesCount+=t):(T.aPosition=d.length,d.push({index:T.aPosition,typedArray:p,componentsPerAttribute:4,componentDatatype:D,offsetInBytes:0,strideInBytes:0,normalize:!1}),B.verticesCount=t),!a.e(i)&&s){var L,g=new E.t$1,I=new E.t$1,M=new Float32Array(2*t),v=new Float64Array(2*t),m=new E.t,_=new E.t,S=new E.t$1;L=Re?new f.t(6378137,6378137,6356752.314245179):new f.t(6378137,6378137,6378137);for(var O=0;O<t;O++){if(A.y.multiplyByPoint(l,E.t.fromElements(p[4*O]*B.vertCompressConstant+B.minVerticesValue.x,p[4*O+1]*B.vertCompressConstant+B.minVerticesValue.y,p[4*O+2]*B.vertCompressConstant+B.minVerticesValue.z,m),_),u!==lt.SCENE3D){var N=E.t.fromElements(_.y,_.z,_.x);S=(new F.n).unproject(N)}else S=L.cartesianToCartographic(_,zt);v[2*O]=S.longitude,v[2*O+1]=S.latitude,0===O?(g.longitude=S.longitude,g.latitude=S.latitude,I.longitude=S.longitude,I.latitude=S.latitude):(g.longitude=Math.max(S.longitude,g.longitude),g.latitude=Math.max(S.latitude,g.latitude),I.longitude=Math.min(S.longitude,I.longitude),I.latitude=Math.min(S.latitude,I.latitude))}for(O=0;O<t;O++)M[2*O]=v[2*O]-I.longitude,M[2*O+1]=v[2*O+1]-I.latitude;T.img=d.length,d.push({index:T.img,typedArray:M,componentsPerAttribute:2,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),y.max=g,y.min=I}break;case Ce:var R=T.aNormal,h=new Int16Array(P.buffer,0,P.length/2);void 0!==R?De(d[R],h,Uint16Array):(T.aNormal=d.length,d.push({index:T.aNormal,typedArray:h,componentsPerAttribute:2,componentDatatype:C.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case ye:var b=new Uint16Array(P.buffer,0,P.length/2),G=(R=T.aTexCoord0,D=C.ComponentDatatype.SHORT,Uint16Array);0==(16&o)&&(D=C.ComponentDatatype.FLOAT,G=Float32Array,b=new Float32Array(P.buffer,0,P.length/4)),void 0!==R?De(d[R],b,G):(T.aTexCoord0=d.length,d.push({index:T.aTexCoord0,typedArray:b,componentsPerAttribute:2,componentDatatype:D,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case le:b=new Uint16Array(P.buffer,0,P.length/2),R=T.aTexCoord1,D=C.ComponentDatatype.SHORT,G=Uint16Array;0==(16&o)&&(D=C.ComponentDatatype.FLOAT,G=Float32Array,b=new Float32Array(P.buffer,0,P.length/4)),void 0!==R?De(d[R],b,G):(T.aTexCoord1=d.length,d.push({index:T.aTexCoord1,typedArray:b,componentsPerAttribute:2,componentDatatype:D,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case ue:void 0!==(R=T.aColor)?De(d[R],P,Uint8Array):(T.aColor=d.length,d.push({index:T.aColor,typedArray:P,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:0,normalize:!0}));break;case Pe:void 0!==(R=T.aSecondColor)?De(d[R],P,Uint8Array):(T.aSecondColor=d.length,d.push({index:T.aSecondColor,typedArray:P,componentsPerAttribute:4,componentDatatype:C.ComponentDatatype.BYTE,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case fe:b=new Float32Array(P.buffer,0,P.length/4);void 0!==(R=T.aVertexWeight)?De(d[R],b,Float32Array):(T.aVertexWeight=d.length,d.push({index:T.aVertexWeight,typedArray:b,componentsPerAttribute:r,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case ce:var U=new Float32Array(P.buffer,0,P.length/4);void 0!==(R=T.aTextureCoordMatrix)?De(d[R],U,Float32Array):(T.aTextureCoordMatrix=d.length,d.push({index:T.aTextureCoordMatrix,typedArray:U,componentsPerAttribute:r,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1}))}}function ge(t,e,r,n,B){var E={},o=[],i=new A.y,C=t;B=a.u(B,{});for(var s=0;s<16;s++)i[s]=e.getFloat64(r+n,!0),r+=Float64Array.BYTES_PER_ELEMENT;E.matrix=i,E.skeletonNames=o;var y=e.getUint32(r+n,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var l=0;l<y;l++){var u=Vt(e,n,C,r),P=u.string;r=u.bytesOffset,o.push(P),B[P]=i}return{byteOffset:r,geode:E}}function Fe(t){var e=t.indexOf("Geometry");if(-1===e)return t;var r=t.substring(e,t.length);return t.replace(r,"")}function Ie(t,e,r,n,B,o,i,C){var s={},l=r.getFloat32(n+B,!0);n+=Float32Array.BYTES_PER_ELEMENT;var u=r.getUint16(n+B,!0);n+=Uint16Array.BYTES_PER_ELEMENT,s.rangeMode=u,s.rangeList=l;var P=new E.t;P.x=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT,P.y=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT,P.z=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT;var c=r.getFloat64(n+B,!0);if(n+=Float64Array.BYTES_PER_ELEMENT,a.e(i)){var d=A.y.clone(i.sphereMatrix,jt),T=A.y.clone(i.ellipsoidMatrix,qt);A.y.inverse(T,T);var p=new f.t(6378137,6378137,6378137);A.y.multiplyByPoint(d,P,Qt);let t=p.cartesianToCartographic(Qt,zt),e=Xt(t.longitude,t.latitude,t.height,Qt);A.y.multiplyByPoint(T,e,P)}if(s.boundingSphere=new y.i(P,c),t>=3){var D=new E.t;D.x=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT,D.y=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT,D.z=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT;var L=new E.t;L.x=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT,L.y=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT,L.z=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT;var g=new E.t;g.x=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT,g.y=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT,g.z=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT;var F=new E.t;F.x=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT,F.y=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT,F.z=r.getFloat64(n+B,!0),n+=Float64Array.BYTES_PER_ELEMENT,s._obb={xExtent:L,yExtent:g,zExtent:F,obbCenter:D}}var I=e,M=(_=Vt(r,B,I,n)).string;n=_.bytesOffset,M=Fe(M=(M=M.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,"")).replace(/\\/gi,"/")),s.childTile=M,s.geodes=[];var v=r.getUint32(n+B,!0);n+=Uint32Array.BYTES_PER_ELEMENT;for(var m=0;m<v;m++){var _;n=(_=ge(e,r,n,B,o)).byteOffset,s.geodes.push(_.geode)}return t>=3&&(n=(_=Vt(r,B,I,n)).bytesOffset),{pageLOD:s,bytesOffset:n}}function Me(t,e,r,a,n,A,B){var E=0,o={},i=[],C=r.getUint32(E+a,!0);E+=Uint32Array.BYTES_PER_ELEMENT;for(var s=0;s<C;s++){var y=Ie(t,e,r,E,a,n,A);E=y.bytesOffset,i.push(y.pageLOD)}return o.pageLods=i,o}function ve(t,e,r){var a=t.vertexAttributes,n=t.attrLocation,A=a.length;n["aTextureBatchId"+r]=A,a.push({index:A,typedArray:e,componentsPerAttribute:1,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0})}function me(t,e,r,n){for(var A=r.length,B=0;B<A;B++)for(var E=r[B],o=E.subName.split("_")[0],i=E.subVertexOffsetArr,C=0;C<i.length;C++){var s=i[C],y=s.geoName,l=s.offset,u=s.count,P=s.texUnitIndex,f=e[y].vertexPackage.verticesCount,c=n[y];a.e(c)||(c=n[y]={});var d=c[P];a.e(d)||(d=c[P]=new Float32Array(f),p.d(d,-1));var T=a.e(t)?t[o]:B;p.d(d,T,l,l+u)}}function _e(t,e,r){var a=t.vertexAttributes,n=t.attrLocation,A=a.length;n[1===r?"instanceId":"batchId"]=A,a.push({index:A,typedArray:e,componentsPerAttribute:1,componentDatatype:C.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,instanceDivisor:r})}function Se(t,e,r,n,A){var B=0,E=t,o=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT;for(var i=0;i<o;i++){var C=Vt(e,r,E,B),s=C.string;B=C.bytesOffset;var y=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var u={};n[s].pickInfo=u;var P=n[s].edgeGeometry;if(-1==n[s].vertexPackage.instanceIndex){for(var f=new Float32Array(n[s].vertexPackage.verticesCount),c=0;c<y;c++){var d=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var T=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var D=0,L=0;u[d]={batchId:c};for(var g=0;g<T;g++)L=e.getUint32(B+r,!0),B+=Uint32Array.BYTES_PER_ELEMENT,D=e.getUint32(B+r,!0),B+=Uint32Array.BYTES_PER_ELEMENT,p.d(f,c,L,L+D);u[d].vertexColorOffset=L,u[d].vertexCount=D}_e(n[s].vertexPackage,f,void 0)}else{var F=n[s].vertexPackage.instanceCount;n[s].vertexPackage.instanceBuffer,n[s].vertexPackage.instanceMode;var I=new Float32Array(F),M=0;for(c=0;c<y;c++){var v=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT;T=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT;for(g=0;g<T;g++){var m=e.getUint32(B+r,!0);if(B+=Uint32Array.BYTES_PER_ELEMENT,I[M]=M,void 0===u[v]&&(u[v]={vertexColorCount:1,instanceIds:[],vertexColorOffset:M}),u[v].instanceIds.push(m),M++,A>=3){D=e.getUint32(B+r,!0);B+=Uint32Array.BYTES_PER_ELEMENT}}}_e(n[s].vertexPackage,I,1)}P=n[s].edgeGeometry;if(a.e(P)){var _,S,O=P.regular.instancesData,N=l._0x48a01b.RegularInstanceStride;if(a.e(O))for(S=O.length,_=0;_<S;_+=N){var R=O[_+9];O[_+9]=f[R]}var h=P.silhouette.instancesData;if(N=l._0x48a01b.SilhouetteInstanceStride,a.e(h))for(S=h.length,_=0;_<S;_+=N){R=h[_+12];h[_+12]=f[R]}}}}function Oe(t){return t<1e-10&&t>-1e-10}function Ne(t,e,r,n,A,B,E,o){var i=new DataView(t),C=new Uint8Array(t),y=i.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var l=s.a(C,r,y);l=l.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,""),r+=y;var u=i.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var P=0;P<u;P++){var f={},c=i.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;var p=i.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT,f.rangeMode=p,f.rangeList=c;var D={};D.x=i.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,D.y=i.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,D.z=i.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var L=i.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT,f.boundingSphere={center:D,radius:L},y=i.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var g=s.a(C,r,y);r+=y,g=Fe(g=g.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,"")),f.childTile=g}var F={},I=i.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;I>=3&&(i.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),i.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var M=i.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var v=new Uint8Array(t,r,M),m=r+M,_=T.pako.inflate(v).buffer;o.push(_),i=new DataView(_);C=new Uint8Array(_);r=0;var S=i.getUint32(r,!0),O=wt(i,_,r+=Uint32Array.BYTES_PER_ELEMENT),N=O.buffer;r=O.byteOffset;var R=Me(I,N,i,O.dataViewByteOffset),h=r%4;0!==h&&(r+=4-h),pe((O=wt(i,_,r)).buffer,i,O.dataViewByteOffset,F,!1,void 0,void 0,I),r=O.byteOffset,I<3&&((O=wt(i,_,r)).buffer,r=O.byteOffset);var b={};!function(t,e,r,n,A,B,E,o,i,C){var y=o,l=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;for(var u={},P=0;P<l;P++){var f=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var c=s.a(B,y-o,f),T=(y+=f)%4;0!==T&&(y+=4-T),E.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var p=E.getUint8(y,!0);y+=Uint8Array.BYTES_PER_ELEMENT;var D=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var L=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var g=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var F=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var I,M=E.getUint32(y,!0);if(y+=Uint32Array.BYTES_PER_ELEMENT,n&&p){var v=y-o;I=B.subarray(v,v+F),y+=F}var m=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;for(var _=[],S=0;S<m;S++){f=E.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var O=s.a(B,y-o,f);y+=f,_.push(O),r[O]=c}var N=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var R=[];for(S=0;S<N;S++){f=E.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var h=s.a(B,y-o,f);y+=f,R.push(h)}var b=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var G=[],U=void 0,x=c;if(n)U=e[c]={};else{var K=r[c];for(x=K;a.e(K)&&K!==c;)x=K,K=r[K];a.e(x)&&(U=e[x])}var H=0;for(S=0;S<b;S++){f=E.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var w=s.a(B,y-o,f);if(y+=f,n){var V=w.split("_")[0];a.e(U[V])?H++:U[V]=S-H}var Y=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var J=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var k=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var W=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var Z=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;for(var X=[],Q=0;Q<Z;Q++){f=E.getUint32(y,!0),y+=Uint32Array.BYTES_PER_ELEMENT;var z=s.a(B,y-o,f);y+=f;var j=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var q=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT;var $=E.getUint32(y,!0);y+=Uint32Array.BYTES_PER_ELEMENT,X.push({geoName:z,offset:j,count:q,texUnitIndex:$})}G.push({subName:w,offsetX:Y,offsetY:J,width:k,height:W,subVertexOffsetArr:X})}me(U,t,G,u);var tt=!1;a.e(I)&&g===d.S3MPixelFormat.CRN_DXT5&&Tt&&(I=pt({data:I},C).bufferView,tt=!0),i[c]={id:c,rootTextureName:x,width:D,height:L,compressType:g,size:F,format:M,textureData:I,subTexInfos:G,requestNames:R,isDXT:tt}}for(var z in u)if(u.hasOwnProperty(z)){var et=t[z].vertexPackage,rt=u[z];for(var $ in rt)rt.hasOwnProperty($)&&ve(et,rt[$],$)}}(F,n,A,B,0,(O=wt(i,_,r)).buffer,i,O.dataViewByteOffset,b,o),r=O.byteOffset;var G=i.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var U=C.subarray(r,r+G),x=s.a(U);r+=G;var K=JSON.parse(x);(I>=3&&(S=i.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),(S&Lt)==Lt)&&(Se((O=wt(i,_,r)).buffer,i,O.dataViewByteOffset,F,I),r=O.byteOffset);if(1==I){var H=R.pageLods,w=!0;for(P=0;P<H.length;P++){var V=H[P];w=""===V.childTile;for(var Y=V.geodes,J=0;J<Y.length;J++)for(var k=Y[J].skeletonNames,W=0;W<k.length;W++){var Z=k[W];if(w){var X=F[Z].vertexPackage;X.boundingSphere=q.calcBoundingSphereInWorker(1,X)}}}}E[l]={result:!0,groupNode:R,geoPackage:F,matrials:K,texturePackage:b,version:Ct.S3M4,dataVersion:I,rootBatchIdMap:n,ancestorMap:A},m<e&&Ne(t,e,m,n,A,!1,E,o)}var Re;function he(e,r){var n=e.buffer;if(Re=e.ellipsoid,e.isOSGB){if(a.e(St)||new Promise((function(e,r){t(["./OSGBToS3M-482da7dd"],e,r)})).then((function(t){(St=t.default).onRuntimeInitialized=function(){Ot=!0},Nt=St.cwrap("OSGBToS3MB","number",["number","number","number","number"])})),!Ot)return null;var A;switch(e.suffix){case"dae":case"DAE":A=4;break;case"x":case"X":A=2;break;default:A=0}n=function(t,e,r){var a=St._malloc(20*e),n=St._malloc(Uint8Array.BYTES_PER_ELEMENT*e);St.HEAPU8.set(t,n/Uint8Array.BYTES_PER_ELEMENT);var A=Nt(n,e,a,r),B=new Uint8Array(St.HEAPU8.buffer,a,A);return t=null,t=new Uint8Array(B).buffer,St._free(a),St._free(n),t}(new Uint8Array(n),n.byteLength,A)}var B=e.isS3MZ,E=e.fileType,o=e.supportCompressType,i=e.bVolume,C=e.isS3MBlock,y=e.modelMatrix,u=e.materialType,P=e.isCoverImageryLayer,f=e.transformPar,c=null,p=null,D=null;if(i&&e.volbuffer.byteLength<8&&(i=!1),i){var L=e.volbuffer,g=new Uint8Array(L,8),F=T.pako.inflate(g).buffer,I=new Float64Array(F,0,1),M=new Uint32Array(F,48,1);if(0===I[0]||3200===M[0]||3201===M[0]){var v=0;0==I[0]&&(v=8),r.push(F);var m=new Float64Array(F,v,6),_=m[0],S=m[1],O=m[2],N=m[3],R=m[4]<m[5]?m[4]:m[5],h=m[4]>m[5]?m[4]:m[5];p={left:_,top:S,right:O,bottom:N,minHeight:R,maxHeight:h,width:(c=new Ht(_,N,O,S,R,h)).width,length:c.length,height:c.height};var b=new Uint32Array(F,48+v,7),G=b[0],U=b[1],x=b[2],K=b[3];D={nFormat:G,nSideBlockCount:U,nBlockLength:x,nLength:K,nWidth:b[4],nHeight:b[5],nDepth:b[6],imageArray:new Uint8Array(F,76+v,K*K*4)}}}var H=0,w={};w.ignoreNormal=e.ignoreNormal;var V=e.rootBatchIdMap||{},Y=e.ancestorMap||{},J={},k=new DataView(n),W=k.getFloat32(H,!0);if(H+=Float32Array.BYTES_PER_ELEMENT,C)return k.getUint32(H,!0),H+=Uint32Array.BYTES_PER_ELEMENT,Ne(n,n.byteLength,H,V,Y,e.isRoot,J,r),J;var Z=!1,X=0;if(W>=3&&(X=k.getUint32(H,!0),H+=Uint32Array.BYTES_PER_ELEMENT),W>=2&&(k.getUint32(H,!0),H+=Uint32Array.BYTES_PER_ELEMENT),Oe(W-1)||Oe(W-2)||W>=3||W>2.09&&W<2.11){var Q=k.getUint32(H,!0);H+=Uint32Array.BYTES_PER_ELEMENT;var z=new Uint8Array(n,H,Q);W>=3&&0===X?n=z.buffer:(n=T.pako.inflate(z).buffer,H=0),r.push(n),k=new DataView(n)}else if(W>1.199&&W<1.201){Q=k.getUint32(H,!0);H+=Uint32Array.BYTES_PER_ELEMENT,r.push(n)}else{Z=!0,H=0;Q=k.getInt32(H,!0);if(H+=Int32Array.BYTES_PER_ELEMENT,H+=Uint8Array.BYTES_PER_ELEMENT*Q,B){k.getUint32(H,!0),H+=Uint32Array.BYTES_PER_ELEMENT;g=new Uint8Array(n,H);n=T.pako.inflate(g).buffer,r.push(n),k=new DataView(n),H=0}}var j=k.getUint32(H,!0),$=wt(k,n,H+=Uint32Array.BYTES_PER_ELEMENT),tt=$.buffer;H=$.byteOffset;var et={},rt=Me(W,tt,k,$.dataViewByteOffset,et,f),at=H%4;0!==at&&(H+=4-at);var nt=($=wt(k,n,H)).buffer,At=W>2.09&&W<3,Bt=e.sceneMode;if(pe(nt,k,$.dataViewByteOffset,w,Z,r,At,W,y,et,P,e.fileType,f,Bt),H=$.byteOffset,At)for(var Et=0;Et<rt.pageLods.length;Et++)for(var ot=rt.pageLods[Et],it=ot.geodes,st=0;st<it.length;st++)for(var yt=it[st].skeletonNames,lt=0;lt<yt.length;lt++){var ut=yt[lt];a.e(w[ut].max)&&(a.e(ot.max)?(ot.max.x=Math.max(w[ut].max.x,ot.max.x),ot.max.y=Math.max(w[ut].max.y,ot.max.y),ot.max.z=Math.max(w[ut].max.z,ot.max.z),ot.min.x=Math.min(w[ut].min.x,ot.min.x),ot.min.y=Math.min(w[ut].min.y,ot.min.y),ot.min.z=Math.min(w[ut].min.z,ot.min.z)):(ot.max=w[ut].max,ot.min=w[ut].min))}W<3&&(($=wt(k,n,H)).buffer,H=$.byteOffset);var Pt={};!function(t,e,r,a,n,A,B){var E=0,o=r.getUint32(E+a,!0);E+=Uint32Array.BYTES_PER_ELEMENT;for(var i=0;i<o;i++){var C=Vt(r,a,e,E),s=C.string,y=(E=C.bytesOffset)%4;0!==y&&(E+=4-y);var u=r.getUint32(E+a,!0);E+=Uint32Array.BYTES_PER_ELEMENT;var P=r.getUint32(E+a,!0);E+=Uint32Array.BYTES_PER_ELEMENT;var f=r.getUint32(E+a,!0);E+=Uint32Array.BYTES_PER_ELEMENT;var c=r.getUint32(E+a,!0);B>3&&(c=Kt(c)),E+=Uint32Array.BYTES_PER_ELEMENT;var T=r.getUint32(E+a,!0);E+=Uint32Array.BYTES_PER_ELEMENT;var p=r.getUint32(E+a,!0);E+=Uint32Array.BYTES_PER_ELEMENT;var D=e.subarray(E,E+T);E+=T;var L=null,g=c;c===l.S3MCompressType.enrS3TCDXTN&&1!=t?(l.L.decode(L,P,f,D,p),p>d.S3MPixelFormat.BGR||p===d.S3MPixelFormat.LUMINANCE_ALPHA?(L=new Uint8Array(P*f*4),D=new Uint8Array(e.buffer,D.byteOffset,P*f)):(L=new Uint16Array(P*f),D=new Uint16Array(e.buffer,D.byteOffset,T/2)),l.L.decode(L,P,f,D,p),A.push(L.buffer),c=0):L=D,n[s]={id:s,width:P,height:f,compressType:c,oriCompressType:g,nFormat:p,imageBuffer:L,mipmapLevel:u}}}(o,($=wt(k,n,H)).buffer,k,$.dataViewByteOffset,Pt,r,W),H=$.byteOffset;var ft=k.getUint32(H,!0);H+=Uint32Array.BYTES_PER_ELEMENT;var ct=new Uint8Array(n).subarray(H,H+ft),dt=s.a(ct);H+=ft,dt=dt.replace(/\n\0/,"");var Tt=JSON.parse(dt);(j&Lt)==Lt&&(W>=3&&(k.getUint32(H,!0),H+=Uint32Array.BYTES_PER_ELEMENT),Se(($=wt(k,n,H)).buffer,k,$.dataViewByteOffset,w,W));if(1==W){var pt=rt.pageLods,Dt=!0;for(Et=0;Et<pt.length;Et++){var gt=pt[Et];Dt=""===gt.childTile;for(var Ft=gt.geodes,It=0;It<Ft.length;It++){yt=Ft[It].skeletonNames;for(var Mt=0;Mt<yt.length;Mt++){var vt=yt[Mt];if(Dt){var mt=w[vt].vertexPackage;mt.boundingSphere=q.calcBoundingSphereInWorker(E,mt)}}}}}return"BatchPBR"===u&&function(t,e,r){for(var n in delete t.ignoreNormal,t)if(t.hasOwnProperty(n)){var A=t[n],B=A.arrIndexPackage;if(B.length<1)continue;if(1===B.length||2===B.length&&13===B[1].primitiveType){var E=A.vertexPackage.attrLocation.aTextureCoordMatrix;if(void 0!==E){if((o=(h=A.vertexPackage.vertexAttributes[E]).typedArray)[0]<0)continue}else if(void 0!==(E=A.vertexPackage.attrLocation.aTextureCoordMatrix||A.vertexPackage.attrLocation.aTexCoord0)){h=A.vertexPackage.vertexAttributes[E];var o=new Float32Array(h.typedArray.buffer,h.typedArray.byteOffset,h.typedArray.byteLength/4);if(3===h.componentsPerAttribute&&o[2]<0)continue}}var i,C,s=0,y={},u=void 0;for(i=0,C=B.length;i<C;i++)13!==(b=B[i]).primitiveType?s+=0===b.indexType?b.indicesTypedArray.byteLength/2:b.indicesTypedArray.byteLength/4:u=B[i],0===i&&(y.indicesCount=0,y.indexType=B[i].indexType,y.primitiveType=B[i].primitiveType,y.materialCode=B[i].materialCode);y.indicesCount=s;var P=A.vertexPackage.verticesCount>65535?new Uint32Array(s):new Uint16Array(s),f=0;for(i=0,C=B.length;i<C;i++)if(13!==(b=B[i]).primitiveType){var c=0===b.indexType?Uint16Array:Uint32Array,d=0===b.indexType?b.indicesTypedArray.byteLength/2:b.indicesTypedArray.byteLength/4,T=new c(b.indicesTypedArray.buffer,b.indicesTypedArray.byteOffset,d);P.set(T,f),f+=T.length}y.indicesTypedArray=P,A.arrIndexPackage=[y],a.e(u)&&(A.arrIndexPackage.push(u),A.edgeGeometry=l._0x48a01b.createEdgeDataByIndices(A.vertexPackage,u));var p=2*B.length*4,D=new Float32Array(p),L={},g=a.u(r.material,r.materials);for(i=0,C=g.length;i<C;i++){var F=g[i].material;L[m=a.u(F.id,F.name)]=F}for(i=0,C=B.length;i<C;i++)if((F=L[(b=B[i]).materialCode])&&(G=a.u(F.pbrMetallicRoughness,"PBR"===F.type?F:void 0))){D[8*i]=G.metallicFactor,D[8*i+1]=G.roughnessFactor,D[8*i+2]=F.alphaCutoff;var I=""===F.alphaMode?0:1,M="none"===F.cullMode?0:1;D[8*i+3]=M|I<<16,D[8*i+4]=G.emissiveFactor.x,D[8*i+5]=G.emissiveFactor.y,D[8*i+6]=G.emissiveFactor.z,D[8*i+7]=0,F.pbrIndex=i}var v="PBRMaterialParam_"+n;for(i=0,C=g.length;i<C;i++){F=g[i].material;var m=a.u(F.id,F.name),_=a.u(F.textureunitstates,F.textureStates);if(m===y.materialCode){_.push({textureunitstate:{addressmode:{u:0,v:0,w:0},filteringoption:0,filtermax:2,filtermin:2,id:v,texmodmatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],url:""}});break}}var S,O,N=A.vertexPackage,R=N.attrLocation.aTexCoord1;if(void 0!==R){var h=N.vertexAttributes[R];S=new Float32Array(2*N.verticesCount),h.typedArray=S}else S=new Float32Array(2*N.verticesCount),R=N.vertexAttributes.length,N.attrLocation.aTexCoord1=R,N.vertexAttributes.push({index:R,typedArray:S,componentsPerAttribute:2,componentDatatype:5126,offsetInBytes:0,strideInBytes:8,normalize:!1});for(void 0!==(R=N.attrLocation.aColor)&&(O=(h=N.vertexAttributes[R]).typedArray),i=0,C=B.length;i<C;i++){F=L[(b=B[i]).materialCode];var b,G=a.u(F.pbrMetallicRoughness,"PBR"===F.type?F:void 0);if(F&&G)for(var U=G.baseColor,x=void 0!==O,K=F.pbrIndex,H=(P=b.indicesTypedArray,0),w=(P=0===b.indexType?new Uint16Array(P.buffer,P.byteOffset,P.byteLength/2):new Uint32Array(P.buffer,P.byteOffset,P.byteLength/4)).length;H<w;H++){var V=P[H];S[2*V]=K,x&&(O[4*V]=255*U.x,O[4*V+1]=255*U.y,O[4*V+2]=255*U.z,O[4*V+3]=255*U.w)}}e[v]={id:v,width:2*B.length,height:1,compressType:0,nFormat:25,imageBuffer:D,mipmapLevel:0}}}(w,Pt,Tt),{result:!0,groupNode:rt,geoPackage:w,matrials:Tt,texturePackage:Pt,version:Ct.S3M4,dataVersion:W,volImageBuffer:D,volBounds:p}}function be(){(a.e(ct)||"undefined"==typeof WebAssembly)&&a.e(Dt)&&(ct.onRuntimeInitialized=function(){Tt=!0},self.onmessage=e(he),self.postMessage(!0))}return function(r){if("undefined"==typeof WebAssembly)return self.onmessage=e(he),void self.postMessage(!0);var A=r.data.webAssemblyConfig;return a.e(A)?n.s.isInternetExplorer()?t([y.n("ThirdParty/Workers/ie-webworker-promise-polyfill.js")],(function(e){return self.Promise=e,-1!==A.modulePath.indexOf("crunch")?t([A.modulePath],(function(t){a.e(A.wasmBinaryFile)?(a.e(t)||(t=self.Module),ct=t,be()):(ct=t,be())})):t([A.modulePath],(function(t){a.e(A.wasmBinaryFile)?(a.e(t)||(t=self.DracoDecoderModule),t(A).then((function(t){Dt=t,be()}))):(Dt=t(),be())}))})):-1!==A.modulePath.indexOf("crunch")?t([A.modulePath],(function(t){a.e(A.wasmBinaryFile)?(a.e(t)||(t=self.Module),ct=t,be()):(ct=t,be())})):t([A.modulePath],(function(t){a.e(A.wasmBinaryFile)?(a.e(t)||(t=self.DracoDecoderModule),t(A).then((function(t){Dt=t,be()}))):(Dt=t(),be())})):void 0}}));
