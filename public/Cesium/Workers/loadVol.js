define(["./createTaskProcessorWorker","./Cartographic-dafe811b","./Cartesian4-58d59766","./pako_inflate-e5e032ee","./Rectangle-49e286b5","./when-207a1520","./Check-07c613bc","./Math-bae672f2"],(function(e,t,a,l,n,r,i,h){"use strict";var o,c=(o=!0,function(e,t){var a=o?function(){if(t){var a=t.apply(e,arguments);return t=null,a}}:function(){};return o=!1,a}),d=c(void 0,(function(){return d.toString().search("(((.+)+)+)+$").toString().constructor(d).search("(((.+)+)+)+$")}));d();var u=Object.freeze({UNLOAD:0,LOADING:1,LOADED:2,VOLLOADED:3,PARSING:4,PARSED:5,TRANSFORMING:6,TRANSFORMED:7,LOST:8,LOADVOL:9,FAILED:10,VOLFAILED:11});function s(e){var a=new t.t(1,255,65025);(a=t.t.multiplyByScalar(a,e,a)).x=a.x-Math.floor(a.x),a.y=a.y-Math.floor(a.y),a.z=a.z-Math.floor(a.z);var l=new t.t,n=new t.t(1/255,1/255,0);return l.x=a.y*n.x,l.y=a.z*n.y,l.z=a.z*n.z,a=t.t.subtract(a,l,a)}function _(e,t,l,n){for(var r=e._nLength*e._nLength*4,i=new Array(r),h=l-t,o=t,c=0;c<e.cellDepth;c++)for(var d=parseInt(c/e._nSideBlockCount)*e._nBlockLength,u=c%e._nSideBlockCount*e._nBlockLength,_=-1;_<e._nBlockLength-1;_++)for(var f=-1;f<e._nBlockLength-1;f++){var g=Math.min(f,e.validWidth-1),v=Math.min(_,e.validHeight-1);g=Math.max(0,g),v=Math.max(0,v);var y,L,p=0;if(e.ySpan>0&&(p=e.validHeight-e.cellHeight),g<e.cellWidth&&v>=p?(L=0,y=c*e.cellHeight*e.cellWidth+(e.validHeight-1-v)*e.cellWidth+g):g<e.cellWidth?(L=0==e.xSpan?1:2,y=c*e.cellHeight*e.cellWidth+(e.validHeight-e.cellHeight-1-v)*e.cellWidth+g):v>=p?(L=1,y=c*e.cellHeight*e.cellWidth+(e.validHeight-1-v)*e.cellWidth+g-e.cellWidth):(L=3,y=c*e.cellHeight*e.cellWidth+(e.validHeight-e.cellHeight-1-v)*e.cellWidth+g-e.cellWidth),!(y<0)){var x=n[L][y],w=new a.e(0,0,0,0);if(-9999!=x){x<t||x>l?x=o:o=x;var B=s(x=(x-t)/h);w.x=B.x,w.y=B.y,w.z=B.z,w.w=1}var W=255*w.x,S=255*w.y,D=255*w.z,H=255*w.w;i[4*(y=(d+_)*e._nLength+u+f)]=parseInt(W),i[4*y+1]=parseInt(S),i[4*y+2]=parseInt(D),i[4*y+3]=parseInt(H)}}return new Uint8Array(i,0,r)}return e((function(e,t){for(var r=e.arrayWork,i=[],h=0;h<r.length;h++)if(r[h]._s3mLoadState===u.LOADED){var o=r[h]._arrayBuffer.slice(16,r[h]._arrayBuffer.byteLength),c=l.pako.inflate(o).buffer;r[h]._arrayBuffer=c,r[h]._s3mLoadState=u.TRANSFORMED,i.push({index:h,buffer:c})}var d=e.textureLevel,s=e._availableNode,f=e._time,g=e._layerBounds,v=e._minFiltration,y=e._maxFiltration;d.cellWidth=e._cellWidth,d.cellHeight=e._cellHeight,d.cellDepth=e._cellDepth;var L=function(e,t,l,r,i,h,o){for(var c=e.length,d=[],u=0;u<c;u++)d.push(e[u]._arrayBuffer.slice(36,e[u]._arrayBuffer.byteLength));var s=4*t.cellWidth*t.cellHeight*t.cellDepth,f=e[0],g=e[c-1],v=t.cellWidth,y=t.cellHeight;o.EndCol-1==g._x&&(v=o.Width-g._x*v),o.EndRow-1==g._y&&(y=o.Height-g._y*y),t.startCol=f._x,t.startRow=f._y,t.endCol=g._x,t.endRow=g._y,t.ySpan=g._y-f._y,t.xSpan=g._x-f._x,t.ySpan>0&&(y+=t.cellHeight),t.xSpan>0&&(v+=t.cellWidth),t._nSideBlockCount=Math.ceil(Math.sqrt(t.cellDepth)),t._nBlockLength=Math.max(y,v)+2,t._nLength=function(e){for(var t=1;t<e;)t<<=1;return t}(t._nBlockLength*t._nSideBlockCount-2),t.validWidth=v,t.validHeight=y,t.bounds=new n.h(f._dataBounds.west,g._dataBounds.south,g._dataBounds.east,f._dataBounds.north);var L=new n.h(r.west,r.south,r.east,r.north);t.multiResolutionTranslation=new a.e((f._dataBounds.west-L.west)/L.width,(g._dataBounds.south-L.south)/L.height,L.width/t.bounds.width,L.height/t.bounds.height);for(var p=[],x=0;x<l;x++){var w=[];for(u=0;u<d.length;u++){var B=new Float32Array(d[u].slice(x*s,(x+1)*s));w.push(B)}p.push(_(t,i,h,w))}return p}(r,d,f,g,v,y,s);return{textureLevel:d,imageDatas:L,unzipTile:i}}))}));
